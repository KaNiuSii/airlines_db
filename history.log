12026800-10f9-412b-b726-4db5b27e4a8a:1737483170096:20:S:BEGIN\n    Flight_Management.Show_Plane_Seats_Distribution(plane_Id => 2);\nEND;\n/
1f872479-67a4-4b70-8fac-b1d04b602101:1737483241577:0:S:SET SERVEROUTPUT ON;
e9313e73-e087-4a98-a878-58d2020c656e:1737483263598:41:S:begin\n   flight_management.show_plane_seats_distribution(plane_id => 2);\nend;\n/
07e3a423-f1a8-407a-b4f9-17fa426517a1:1737485497113:698:S:select *\nfrom PLANE_TABLE\n;
def81528-265b-4ec2-8a04-f5b58caa7045:1737485568866:0:F:select p.ID, DEREF(p.seat_list)\nfrom PLANE_TABLE p\n;
102829d1-f390-4528-a0e0-273f2019dc14:1737485751345:67:S:select p.id,\n       s.*\n  from plane_table p,\n       table ( p.seat_list ) s;
1e9e015e-2ff7-47e6-a15d-69221a284e53:1737485843776:0:F:SELECT p.id, \n       DEREF(s.column_value).*\nFROM plane_table p, \n     TABLE(p.seat_list) s;
752ffe48-25a0-445c-bcd7-198886c3556a:1737485927105:0:F:SELECT p.id, \n       t.*\nFROM plane_table p,\n     TABLE(p.seat_list) s,\n     TABLE(DEREF(s.column_value)) t;
004a2e5e-4d48-49d3-91d7-e2948c67ef76:1737486066348:0:F:select p.id,\n       ( deref(s.column_value) ).seat_number,\n       ( deref(s.column_value) ).class,\n       ( deref(s.column_value) ).availability\n  from plane_table p,\n       table ( cast(p.seat_list as nested_table_of_ref) ) s;
75ada7c1-a34c-4fb8-965c-8e132c200afe:1737486113896:0:F:select column_name,\n       data_type,\n       data_type_owner,\n       type_name\n  from all_tab_columns\n where table_name = 'PLANE_TABLE'\n   and column_name = 'SEAT_LIST';
821f9351-b0d5-4d35-b160-bf2f3837da59:1737486138938:0:F:SELECT p.id, \n       DEREF(s.column_value).*\nFROM plane_table p,\n     TABLE(CAST(p.seat_list AS YOUR_COLLECTION_TYPE)) s;
ea2eb93c-31ae-466d-9836-54087142d274:1737486189157:0:F:SELECT p.id, \n       (DEREF(s.column_value)).price\nFROM plane_table p,\n     TABLE(CAST(p.seat_list AS NESTED_TABLE_OF_REF)) s;
4a739cb9-4b13-49c1-b20b-4366fd6e53a7:1737486298910:48:S:SELECT p.id, \n       (DEREF(s.column_value)).Price AS Price\nFROM Plane_Table p,\n     TABLE(CAST(p.Seat_list AS PlaneSeatList)) s;
f0c5f401-6b69-4bea-a09d-c9ace66e0ddb:1737486385425:0:F:select p.id,\n       ( deref(s.column_value) ).* as price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
e7c634fa-d61d-41b4-bcce-b92980e5afc7:1737486498243:0:F:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       ( deref(s.column_value) ).travelclassref,\n       ( deref(s.column_value) ).price,\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
930c6271-8c29-44de-9ee5-53e4fa4c325b:1737486506991:71:S:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       ( deref(s.column_value) ).travelclassref,\n       ( deref(s.column_value) ).price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
bda7eab6-534e-42b6-a0a1-e5176047b304:1737486568258:0:F:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       ( deref(s.column_value) ).travelclassref,\n       ( deref(s.column_value) ).price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s\n  join travelclass_table tc on tc.Id = ( deref(s.column_value) ).travelclassref;
50169638-bb29-4ed0-a208-c193ebe33750:1737486626933:0:F:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       ( deref(s.column_value) ).travelclassref,\n       ( deref(s.column_value) ).price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s\n  join travelclass_table tc on tc.Id = CAST(( deref(s.column_value) ).travelclassref as NUMBER);
2d92820c-8472-4bba-a39a-03b2f9902890:1737486699362:0:F:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       (defer(( deref(s.column_value) ).travelclassref)).id,\n       ( deref(s.column_value) ).price,\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
94009fd4-b1d6-4493-ae1a-cd01cc366440:1737486743174:0:F:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow,\n       ( deref(s.column_value) ).seatcolumn,\n       (defer(( deref(s.column_value) ).travelclassref)).id,\n       ( deref(s.column_value) ).price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
ff7384ae-3441-4d60-ac74-275568301f08:1737486862749:70:S:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref(s.column_value) ).price as price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
0e9bee17-22da-4362-9a4e-4e17416790be:1737486894205:93:S:select p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_id,\n       ( deref(s.column_value) ).price as price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s;
9fc71833-5b51-4f91-a707-f2e28ec7addf:1737487079609:0:F:select f.id as flight_id ,p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_id,\n       ( deref(s.column_value) ).price as price\n  from plane_table p,\n       table ( cast(p.seat_list as planeseatlist) ) s\n  join FLIGHT_TABLE f on f.PLANE_ID = p.ID\n       ;
34b83940-3531-40c5-b40a-2ec1f7f7d822:1737487100004:0:F:select f.id as flight_id,\n       p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_id,\n       ( deref(s.column_value) ).price as price\n  from plane_table p,table ( cast(p.seat_list as planeseatlist) ) s\n  join flight_table f\non f.plane_id = p.id;
889b089a-9bc6-4702-a89a-fb2499f50f15:1737487193304:115:S:select f.id as flight_id,\n       p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n       ( deref(s.column_value) ).price as price\n  from flight_table f\n  join plane_table p\non f.plane_id = p.id\n cross join table ( cast(p.seat_list as planeseatlist) ) s;
4624bf27-7e0d-4273-b75b-3db99fe41c8b:1737487247647:92:S:select * from FLIGHT_TABLE;
e0c53784-b0fa-4837-a664-1c9684993882:1737487450065:320:S:DECLARE\n  v_seats_taken PlaneSeatList := PlaneSeatList(); -- Initialize empty seat list\nBEGIN\n  INSERT INTO Flight_Table VALUES(\n    Flight(\n      1,                -- Flight ID\n      1,                -- Plane ID\n      TIMESTAMP '2025-02-01 09:00:00',  -- Departure\n      TIMESTAMP '2025-02-01 11:00:00',  -- Arrival\n      'WAW',            -- IATA_from\n      'KRK',            -- IATA_to\n      TIMESTAMP '2025-01-31 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      RoleList()        -- Empty crew list for now\n    )\n  );\n\n  INSERT INTO Flight_Table VALUES(\n    Flight(\n      2,                -- Flight ID\n      2,                -- Plane ID\n      TIMESTAMP '2025-02-02 14:00:00',  -- Departure\n      TIMESTAMP '2025-02-02 17:00:00',  -- Arrival\n      'KRK',            -- IATA_from\n      'WAW',            -- IATA_to\n      TIMESTAMP '2025-02-01 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      RoleList()        -- Empty crew list for now\n    )\n  );\n\n  COMMIT;\nEND;\n/
56e37ab4-7f43-40f2-b81d-19e0c0dd5e69:1737487492739:61:S:select f.id as flight_id,\n       p.id as plane_id,\n       ( deref(s.column_value) ).seatrow as seat_row,\n       ( deref(s.column_value) ).seatcolumn as seat_column,\n       ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n       ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n       ( deref(s.column_value) ).price as price\n  from flight_table f\n  join plane_table p\non f.plane_id = p.id\n cross join table ( cast(p.seat_list as planeseatlist) ) s;
197b937c-4ec8-4628-9047-689766570c76:1737487582064:22:S:select username,\n       osuser,\n       machine,\n       schemaname\n  from gv$session\n where sid = (\n   select sys_context(\n      'userenv',\n      'sid'\n   )\n     from dual\n);
d76d6f3d-cd55-4edb-b75c-a9abdd95e4f5:1737487587620:87:S:-------------------------------------------------------------------------------\ncreate or replace view v_travelclass_stats as\n   select t.class_name as class_name,\n          count(*) as seat_count,\n          min(ps.price) as min_price,\n          max(ps.price) as max_price,\n          round(\n             avg(ps.price),\n             2\n          ) as avg_price\n     from planeseat_table ps\n     join travelclass_table t\n   on ps.travelclassref = ref(t)\n    group by t.class_name;
c19c6749-843c-408a-8108-356688e33b87:1737487589653:23:S:create or replace view v_plane_seatcount as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.seat_list )\n          ) as seat_count\n     from plane_table p;
09fe8c8b-1e37-4617-ac51-1f74abf8b824:1737487592112:51:S:create or replace view v_plane_requiredroles as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.required_role_list )\n          ) as required_roles_count\n     from plane_table p;
648c22c8-913e-45a9-98f5-9c285c7ce0ea:1737487597266:29:S:create or replace view v_crewmember_rolecount as\n   select c.id as crew_member_id,\n          c.first_name\n          || ' '\n          || c.last_name as full_name,\n          (\n             select count(*)\n               from table ( c.roles_list )\n          ) as role_count\n     from crewmember_table c;
96ddb21f-0cad-4dbd-af16-e73f5f0738ee:1737487599804:28:S:create or replace view v_airport_techsupport as\n   select a.iata as airport_iata,\n          a.name as airport_name,\n          (\n             select count(*)\n               from table ( a.technical_support_list )\n          ) as tech_support_count\n     from airport_table a;
a03749c6-e285-4029-b859-bd03b24a2b06:1737487609278:28:S:create or replace view v_flights_seatings as\n   select f.id as flight_id,\n          p.id as plane_id,\n          ( deref(s.column_value) ).seatrow as seat_row,\n          ( deref(s.column_value) ).seatcolumn as seat_column,\n          ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n          ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n          ( deref(s.column_value) ).price as price\n     from flight_table f\n     join plane_table p\n   on f.plane_id = p.id\n    cross join table ( cast(p.seat_list as planeseatlist) ) s;
55cc8e80-8d76-4fd8-9da3-a6fadc5d9e0b:1737487609860:22:S:-------------------------------------------------------------------------------\nselect *\n  from v_travelclass_stats;
1600ca20-387c-40b6-834f-7ba8930bb1fc:1737487610045:18:S:select *\n  from v_plane_seatcount;
48cb4ce4-6702-479e-be92-7b389391065b:1737487610220:16:S:select *\n  from v_plane_requiredroles;
094dd39b-9206-4498-b332-8131ac34e727:1737487610366:14:S:select *\n  from v_crewmember_rolecount;
eded0b45-1977-4341-8298-6bbe617c354f:1737487610520:18:S:select *\n  from v_airport_techsupport;
80a5fecd-3ba6-4e46-b6f5-d39d045dba4c:1737487610771:28:S:select *\n  from v_flights_seatings;
86d2c0b8-15b2-40f3-ad15-23035093907f:1737488075581:2917:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
cfb41def-cd95-4081-b5df-be3ee5f82b53:1737488081796:92:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
82e9c76e-6cff-4378-921d-59a5e10c31f3:1737488082177:54:S:CREATE TABLE TravelClass_Table OF TravelClass;
177e89d2-5768-46ea-beaa-1f06ef74330d:1737488082341:0:F:/
def46310-b212-48ed-ad35-ac1db19e5541:1737488083529:356:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
07d2f4d7-4ce5-4b76-af91-3cb57531c2a5:1737488084013:0:F:/
f20887e4-4d36-4644-af5f-62ac99ea909b:1737488085015:30:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
33400f6d-1a06-4ac4-9a0c-01e0f31d6323:1737488085239:16:S:CREATE TABLE Role_Table OF Role;
9e4b6c54-d71c-4bdf-a892-7cdc2321a40f:1737488085329:0:F:/
69425810-ae4b-4fa8-9f64-bc6a502e392f:1737488085551:33:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
73a87b0a-f0bc-463d-b2ea-125269feed31:1737488085667:0:F:/
c597966e-2621-4e7e-b817-6508bf1bcf65:1737488087222:36:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
19d6693b-272e-4421-94da-703186bd6c65:1737488087421:30:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
ebd38a80-d41a-4d8e-b10e-3b1e7e4863e8:1737488087540:0:F:/
b7c70ee1-4a1e-4c4d-b25b-3ab9ef13b791:1737488087852:32:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
a2e9ed00-13f7-4932-8320-0b2a31cdb701:1737488087951:0:F:/
4ec6b0cd-9fa9-4d45-860b-22254ffc3162:1737488088321:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
79c16595-4605-45cd-926d-45b791a632bc:1737488088636:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
851c2dcb-d8c9-4908-8443-b53c64650560:1737488089274:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
11218715-c889-44aa-a80b-7146e010f54c:1737488089476:25:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
0adc0d24-3ea2-45fc-aac9-fbe32b4c816c:1737488089598:0:F:/
0dabec1b-95d3-4562-93cd-38a3c5e6f8a4:1737488089838:28:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
d9794dac-292a-43a3-abd8-85d6fd828fa3:1737488089936:0:F:/
55939b49-4d6c-406b-bdf9-201e457395f9:1737488090749:30:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
b7204563-8c16-40fc-9aa3-1bfefd8141d9:1737488093047:116:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
032a134d-92c1-4bf9-b6c3-8db378f7839c:1737488093298:0:F:/
588fbc74-c033-4144-a845-88639debca99:1737488093694:65:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
e8a6db40-c442-43c4-ac38-df7df856e06f:1737488093895:0:F:/
f89ac8f5-fb11-4a8c-b03c-280ab21ab910:1737488099218:89:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
e88f2e57-25ef-45a3-a267-aff4e091b379:1737488099959:96:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
3fb79b24-34d9-4971-a5c0-35f87e4771f5:1737488100185:0:F:/
80f5b75f-06c3-421b-8c46-15ef1c2aadaf:1737488100732:53:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
5400f5bf-6002-48bc-b351-7cefc35b5a2a:1737488100899:0:F:/
9628d311-47ba-45f1-9c3a-505f77fcecef:1737488102303:70:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
dfc4ff8d-d8c6-4555-918d-b636967b5726:1737488102804:49:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
a5ec3675-c083-43e5-8cc9-f4c00d8d4872:1737488103037:0:F:/
05ac5f37-bab0-4ae8-b64e-f788c688b106:1737488103646:81:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
1a1f2966-e350-44e0-961b-0b5c2fd17691:1737488103909:0:F:/
36cc89ce-6192-4ebb-8259-05711da0e6c6:1737488106597:62:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
13d46eca-aafb-4900-91a2-b34b22bc8a8b:1737488107032:62:S:CREATE TABLE Reservation_Table OF Reservation;
04b7e255-69ca-4478-ad93-54baf2c571f9:1737488107250:0:F:/
4733ff66-d617-4313-bd94-79cd4ba8ba09:1737488107667:50:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
375a61ff-e473-4200-ad31-a382cd448ecb:1737488107857:0:F:/
9a2a0751-bc32-4aac-bcf5-66e18ee7285f:1737488112910:63:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
57f1ce85-df85-4b50-a8db-804df10caad8:1737488113556:92:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
1fd8bd24-5b95-4c40-9be6-a2e8bb08e318:1737488113754:0:F:/
4974d4f2-aefe-472f-a8a6-0768caa71d65:1737488114095:46:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
ff1718ad-6563-47ce-9e7a-d80c1fc99c63:1737488114240:0:F:/
d3a73fdf-7f10-47dd-9060-1616f244933f:1737488116463:35:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
7610e5eb-0f89-4fcd-be11-563707161215:1737488116879:31:S:CREATE TABLE Passenger_Table OF Passenger;
11d333cd-841e-4a92-bb25-897eaaacdfcd:1737488117011:0:F:/
246da3eb-0905-457e-8599-05b01c9a56bc:1737488117439:32:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
10879cc1-474d-4a2f-9324-cfb78d2d2914:1737488117562:0:F:/
6eeb79a6-620d-4dc4-be5b-497e7f63bc74:1737488118765:32:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
de2e86e2-dac0-4d37-8dc1-4dcc75857d51:1737488118975:23:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
d340fc18-43c0-4b68-b416-a9ef417f683c:1737488119079:0:F:/
85e18703-007a-44af-90fa-2769e13e84be:1737488119306:23:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
34a27cd7-ff2a-43c8-8630-873cb37fb1eb:1737488119393:0:F:/
a22a4b75-c59b-4660-a217-460eebeb3ee8:1737488119681:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
abfdb5a8-8b14-45c2-a465-41e3c63d33cc:1737488120927:30:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
27e7ba56-8ee3-4203-9fe1-cfd0024eea12:1737488121181:39:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
f4c7c983-34e7-4786-a1c5-89d4eb1f015b:1737488121293:0:F:/
e05becaa-3c15-44ae-9beb-2a57a63485d3:1737488121485:26:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
8537f5ea-551c-4c68-ba8b-1ae41c9e6c2b:1737488121579:0:F:/
1ed679f2-11bb-44f3-9b54-8f2f29c2f0b3:1737488138101:1587:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
dcfb863a-0f42-41ea-9e8b-8321763fd847:1737488207787:940:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
a0353681-2c74-4a2d-a520-1102322137a6:1737488228783:67:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
29655c30-875c-46ca-81d1-864260e3c72b:1737488230549:48:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
aa5e4dd9-563a-4a9f-b94a-69aafea5f97f:1737488230885:39:S:CREATE TABLE TravelClass_Table OF TravelClass;
91d3785f-0373-491a-9601-660b359877fc:1737488231030:0:F:/
8a523187-ef0f-40ac-b5ae-edda3a81e716:1737488231375:44:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
6392cbc7-a25e-442f-b67e-1e0e6b4ddfc0:1737488231516:0:F:/
f3ea3fc5-05af-4ecc-afc7-a71d273c0295:1737488232152:29:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
26c18e96-d7b6-4a5b-9296-bc87db416750:1737488232375:23:S:CREATE TABLE Role_Table OF Role;
547ce944-22df-4888-b5e5-d83bbfba7420:1737488232481:0:F:/
a7c2f483-0e0c-4af8-8aa3-d873b87e3334:1737488232753:30:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
3da38324-0060-4c84-996c-11b14ef5b540:1737488232864:0:F:/
1c469c4c-5f58-483c-a50b-69a30407377d:1737488234056:63:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
dc98e193-e769-4de0-96b4-7d016b3999a2:1737488234612:65:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
675e8196-bb1a-4a73-bc75-bc8f6cfa3d3b:1737488234863:0:F:/
b7a91f97-43ba-4eb4-9859-d1b3277bb0fe:1737488235530:124:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
d97f1156-9230-4c57-af9a-11a851a27802:1737488235848:0:F:/
b9fc0d0b-102a-4c3f-9c21-7cfb14d2ba69:1737488237438:44:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
3a736b7f-2a09-4d99-96ad-6c28f411aa77:1737488238011:33:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
b00f8d8a-34a5-4c6d-85a4-94b533527bc6:1737488238974:35:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
2154bb49-1e1d-4854-af1f-d829726edf1e:1737488239267:27:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
464fe4bf-b64c-43b9-bfed-8bb0cc929116:1737488239396:0:F:/
d0bd6c05-b393-410d-924c-f76cfa366e95:1737488239770:40:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
ef65ffec-91ae-4584-9149-b51c2825e1ec:1737488239914:0:F:/
d26c04f7-80ff-419f-8f87-5f3b8f434477:1737488241292:72:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
fb51f56c-d6d1-4468-b6fb-2d06b38f7da1:1737488242961:116:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
56a14eb9-e0da-4ab9-af1a-a7a317d64e48:1737488243240:0:F:/
eb45521a-be6c-4bdb-96e1-4732f8e7e021:1737488243741:60:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
2e375dd9-0fa0-493c-8240-298d83ac4458:1737488243939:0:F:/
e2bf696e-9614-42aa-9b7c-16e2a91cc997:1737488247142:39:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
f064c548-d443-49ca-82a9-359d236e3bec:1737488247565:61:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
c091e477-b5ae-40a8-ba24-cd5857ca6aea:1737488247731:0:F:/
58af05cd-c98c-4dd9-b13a-def0f0bf06dd:1737488248328:44:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
ed3d4c11-be9b-44bf-acd6-c896c9e8a153:1737488248476:0:F:/
6758072e-0a5d-4699-aa46-501a5a93defd:1737488249622:31:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
e31cb258-4fa6-4f25-8d6b-c3fbb7a6db78:1737488249843:25:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
09d06902-d7c7-430c-929a-28d95b67be0b:1737488249954:0:F:/
9d1d73e1-390c-4104-8d09-e5d7cf592441:1737488250176:21:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
2126c0e2-050a-42a8-97c8-481b8c35b5d9:1737488250264:0:F:/
c6bee106-48fa-41f3-bf78-016a4628b6de:1737488251163:27:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
86178b5e-674f-423a-aec6-fcf9e661da5a:1737488251346:16:S:CREATE TABLE Reservation_Table OF Reservation;
1108a38b-042e-4eb1-bc35-1188d9f03914:1737488251435:0:F:/
2a02e525-93b9-46aa-8396-3c6cd5c5de4a:1737488251679:28:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
cfe4974c-3c09-4714-adac-10b102fbab9a:1737488251776:0:F:/
fc91fbd1-ce41-4639-a150-d6a5f6c6604a:1737488253328:29:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
8d839c1d-cea5-4971-8518-d207d960555c:1737488253859:57:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
ecd679b2-65ba-4e05-a763-f8e372236913:1737488253988:0:F:/
a41489dc-5cd8-4fe6-9099-dc3fb4ad9903:1737488254213:33:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
cd355110-98ca-45db-b6f2-e06148aa40e1:1737488254328:0:F:/
461e98e2-fb1b-49c2-a1ca-7acc7cb23a8e:1737488255827:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
9364e308-abf1-44c8-afcd-7a7ff266efd5:1737488255996:19:S:CREATE TABLE Passenger_Table OF Passenger;
91ab5d25-acac-415a-bb29-fc6245aa834f:1737488256085:0:F:/
abf5bd0d-8219-4f21-9292-6b0fa7c6be0a:1737488256290:23:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
d48b98a5-c946-46b1-9e63-d901c93377ca:1737488256381:0:F:/
4d83ec01-256e-4ae5-b401-0925eef9439c:1737488257787:59:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
c823f37b-3f88-49b7-8f01-e3f4b501b0cb:1737488258287:67:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
55c45fda-690a-49fc-b76b-96e16a372816:1737488258536:0:F:/
cdb3b961-084c-49f5-9523-bb37f9647c6d:1737488260256:57:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
14d02543-2219-4c57-a9bd-49a6cf1bb5ba:1737488260460:0:F:/
688f8e54-09e2-4b8d-a7bd-643c0204c8ae:1737488261069:40:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
ee600a41-ee5a-4720-aefe-e185f534ca4a:1737488262736:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
3c54b63e-5372-4092-8d07-c79ea7b99d72:1737488263116:53:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
f10c2fc7-7057-45c2-a7d2-fd2eda0486d7:1737488263265:0:F:/
7b7beba8-2603-4f62-8f2b-5c5ccee19070:1737488263533:33:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
675cee8a-9049-47fd-a8f4-5432f14960a0:1737488263660:0:F:/
dbb2c196-5733-4836-9c8f-8f477e1ec2ec:1737488525405:922:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
99c389cb-86c9-4bb1-8d62-d167b87d95d3:1737488532330:560:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
e8248dc3-90c6-4176-b89d-fd77636b2c69:1737488622738:43:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
d892c060-f0f4-45b7-b341-1259a4dc89ea:1737488626915:44:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
cd1b4735-bb32-4090-b41d-50321facaff9:1737488629038:66:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
4e2f64df-0b5a-44ac-afa5-adc7cc8312ae:1737488629714:73:S:CREATE TABLE TravelClass_Table OF TravelClass;
9c3435aa-99b8-4e14-97a0-8a195a629ba8:1737488630084:0:F:/
f9b3255b-8281-4414-8162-7e43d4db2bf9:1737488630728:51:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
157936f2-9c07-4197-a0af-7d0f536b58c9:1737488630911:0:F:/
0bc9855a-c21f-4033-ba1f-6879ddfac902:1737488632075:27:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
ba46570a-b6dc-4301-8f09-d6f2e1564eca:1737488632358:26:S:CREATE TABLE Role_Table OF Role;
ba46570a-b6dc-4301-8f09-d6f2e1564eca:1737488632358:26:S:CREATE TABLE Role_Table OF Role;
bfaa43f7-22e1-482d-8690-0881d0016679:1737488632828:40:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
bfaa43f7-22e1-482d-8690-0881d0016679:1737488632828:40:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
bd35391c-bbbd-488b-bd1c-26715e1cfd55:1737488634641:53:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
52d43a37-5736-49bb-ad8b-184e9c5b7b1e:1737488635126:54:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
52d43a37-5736-49bb-ad8b-184e9c5b7b1e:1737488635126:54:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
578acbbe-eb90-42c4-b47d-c6d4a8d74093:1737488636701:74:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
578acbbe-eb90-42c4-b47d-c6d4a8d74093:1737488636701:74:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
de0292b3-d7cc-4b9e-a27d-c9c1e2e379c9:1737488637707:40:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
ac568a43-0b89-48c4-bcf4-f0fb9c963e09:1737488638259:31:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
66f14845-8305-4286-97b7-0d2a4e79a273:1737488639355:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
b16321d3-ee0b-4fb0-a702-4971b6c14f27:1737488639616:26:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
b16321d3-ee0b-4fb0-a702-4971b6c14f27:1737488639616:26:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
d4b0ae53-1060-4751-b7b4-aff667bc711d:1737488640105:37:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
d4b0ae53-1060-4751-b7b4-aff667bc711d:1737488640105:37:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
c6674e17-e812-49bf-83cf-aa593de9cea8:1737488641651:111:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
7222e028-6d54-4b2d-968e-4a9296fa3fcc:1737488643498:125:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
7222e028-6d54-4b2d-968e-4a9296fa3fcc:1737488643498:125:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
48f87b02-efdf-4b66-8f41-f4b3ee2ae381:1737488644212:58:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
48f87b02-efdf-4b66-8f41-f4b3ee2ae381:1737488644212:58:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
b770361d-9fd5-4c01-b438-ce366182d615:1737488647253:75:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
f89b7f9a-8ff4-48e7-9b4d-ecdf5f2b0aab:1737488648051:144:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
f89b7f9a-8ff4-48e7-9b4d-ecdf5f2b0aab:1737488648051:144:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
3bf615f3-1c02-4eab-835b-675af70d5579:1737488649403:106:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
3bf615f3-1c02-4eab-835b-675af70d5579:1737488649403:106:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
08420378-1385-4dca-bf3b-d25ae7517453:1737488651103:37:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
af66e171-d24a-4785-a0a5-168b54770dc9:1737488651457:28:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
af66e171-d24a-4785-a0a5-168b54770dc9:1737488651457:28:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
e5411675-ec31-467a-938b-fa2996610ec8:1737488652027:39:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
e5411675-ec31-467a-938b-fa2996610ec8:1737488652027:39:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
c1b5e43f-f348-4afc-94d3-19f78b7ab137:1737488653850:66:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
66432349-3907-40ca-869d-c504cbfb85ef:1737488654490:107:S:CREATE TABLE Reservation_Table OF Reservation;
66432349-3907-40ca-869d-c504cbfb85ef:1737488654490:107:S:CREATE TABLE Reservation_Table OF Reservation;
9a58cd24-7818-4e41-8f95-53cc3f131c0a:1737488655695:61:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
9a58cd24-7818-4e41-8f95-53cc3f131c0a:1737488655695:61:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
46ea805d-17c3-4204-a1e9-e8bc0a987069:1737488659287:46:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
60fe287e-9080-40ae-95a2-a379741b29a7:1737488659854:91:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
60fe287e-9080-40ae-95a2-a379741b29a7:1737488659854:91:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
8fb35225-02e4-452a-8645-ef93f917a963:1737488660420:43:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
8fb35225-02e4-452a-8645-ef93f917a963:1737488660420:43:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
4082bc01-6784-4a22-a132-bd24f30c3aba:1737488663822:58:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
e09faeee-fd45-43c9-b5a9-645e2c3bf838:1737488664310:60:S:CREATE TABLE Passenger_Table OF Passenger;
e09faeee-fd45-43c9-b5a9-645e2c3bf838:1737488664310:60:S:CREATE TABLE Passenger_Table OF Passenger;
e7a533ae-2c88-4842-947f-fb9b3d627266:1737488665108:59:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
e7a533ae-2c88-4842-947f-fb9b3d627266:1737488665108:59:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
e1097083-4dc2-4348-8893-7d0868523854:1737488667702:48:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
9c476226-cefa-43cf-ac26-e6d5ea56ee7d:1737488668053:32:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
9c476226-cefa-43cf-ac26-e6d5ea56ee7d:1737488668053:32:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
0fd1fdfc-7c6f-40e1-a2cb-185f986da46a:1737488668541:39:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
0fd1fdfc-7c6f-40e1-a2cb-185f986da46a:1737488668541:39:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
c569c34b-a8d1-4b5f-8ca4-897f0d51120e:1737488669139:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
988362ac-f714-4bb2-bc4b-201516fe1245:1737488670996:34:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
4603e2bb-7507-4a95-a237-5a47ebab8f9a:1737488671354:48:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
4603e2bb-7507-4a95-a237-5a47ebab8f9a:1737488671354:48:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
ce98aa96-53aa-4dac-8a28-2e2a3fc40d04:1737488671792:34:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
ce98aa96-53aa-4dac-8a28-2e2a3fc40d04:1737488671792:34:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2bb935be-135c-467b-88e5-d2d01d9dd409:1737488742862:1699:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
14e9a4d6-5197-483a-aa92-b5756f2ac9ab:1737490045771:118:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
e09bcd00-99ba-465a-9325-f4a344457065:1737490068383:1298:S:CREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
dd00dda5-b5bf-4874-bb26-7e64b12e0f5d:1737490072731:195:S:CREATE TABLE TravelClass_Table OF TravelClass;
24d9dfb8-f2bb-4d36-8f9e-020e2b93325d:1737490078917:181:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
24d9dfb8-f2bb-4d36-8f9e-020e2b93325d:1737490078917:181:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
bfd6a681-5aac-4f3e-91f5-6c9413e8b41f:1737490156834:647:S:DESC TravelClass_Table;
c354a720-fd42-483f-939c-c52bd56d30b7:1737490164258:9285:S:SELECT * FROM user_constraints WHERE table_name = 'TRAVELCLASS_TABLE';
46b9b5bd-7e2c-456d-bbe1-02971083e289:1737490246906:260:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
83b78bf7-0744-4f97-a6ad-f100b77301bf:1737490253088:1004:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
f4c67e43-9d35-489f-ad5b-b05e403a1eb8:1737490257114:110:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
1d6c279c-c1bf-46fe-8cf9-e9aecec2c487:1737490257556:50:S:CREATE TABLE TravelClass_Table OF TravelClass;
1d6c279c-c1bf-46fe-8cf9-e9aecec2c487:1737490257556:50:S:CREATE TABLE TravelClass_Table OF TravelClass;
64b143c4-db90-496d-be4c-0444f46f5167:1737490258205:42:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
64b143c4-db90-496d-be4c-0444f46f5167:1737490258205:42:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
e7a35505-4e48-44c2-b9df-f0615630e9a1:1737490259261:56:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
681208bd-2d44-4a9c-b4c5-fc87f7a7d275:1737490259597:45:S:CREATE TABLE Role_Table OF Role;
681208bd-2d44-4a9c-b4c5-fc87f7a7d275:1737490259597:45:S:CREATE TABLE Role_Table OF Role;
17fb13ee-038b-4059-a682-eab877c9c86b:1737490260227:49:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
17fb13ee-038b-4059-a682-eab877c9c86b:1737490260227:49:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
17278764-e8b2-4414-aada-775dbe637f0f:1737490262147:25:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
08fdab96-63d1-4c8a-97a9-24f744054226:1737490262457:85:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
08fdab96-63d1-4c8a-97a9-24f744054226:1737490262457:85:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
2994afe1-7e78-453b-a622-3b529c2f910e:1737490262946:35:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
2994afe1-7e78-453b-a622-3b529c2f910e:1737490262946:35:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
7a2ad153-735f-48ec-b47f-339540e3f139:1737490263388:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
51ecf72a-c2e9-4d3d-8a53-7d9bc91be74d:1737490263688:17:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
da4192e3-389f-43ba-8310-533d3a1f5ba8:1737490264300:18:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
290aaf68-fcfc-476a-b4c9-313ad0ffa458:1737490264506:18:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
290aaf68-fcfc-476a-b4c9-313ad0ffa458:1737490264506:18:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
13440803-e3d8-4924-a2ee-78f63b1bc85c:1737490264924:34:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
13440803-e3d8-4924-a2ee-78f63b1bc85c:1737490264924:34:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
e20455e1-8337-4989-be3c-1eccdca28567:1737490265943:20:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
c4da831b-b49c-4234-84d6-a5ad0f7ed808:1737490266311:72:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
c4da831b-b49c-4234-84d6-a5ad0f7ed808:1737490266311:72:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
0b4ef1b6-3acd-4d67-a5a5-a0a90e9c4fb7:1737490266763:29:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
0b4ef1b6-3acd-4d67-a5a5-a0a90e9c4fb7:1737490266763:29:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
ef61af0d-00d0-42e3-a41a-c5869b51a395:1737490270998:39:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
dbf6508a-df7b-48ce-ab07-8c9591ce548c:1737490271444:65:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
dbf6508a-df7b-48ce-ab07-8c9591ce548c:1737490271444:65:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
96b9ce20-b82a-4c06-b98b-3a443bf1a7a0:1737490272020:46:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
96b9ce20-b82a-4c06-b98b-3a443bf1a7a0:1737490272020:46:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
2455c016-5426-422c-b903-2a5da67b89a7:1737490273491:66:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
8ebfee43-9d09-4fd8-8516-991b2be246cc:1737490274297:63:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
8ebfee43-9d09-4fd8-8516-991b2be246cc:1737490274297:63:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
12af680a-2508-4d83-9097-cff4208f3ce8:1737490275546:79:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
12af680a-2508-4d83-9097-cff4208f3ce8:1737490275546:79:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
5686b785-6bc6-448b-b7c0-80c2d8f606db:1737490277602:37:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
ce84a478-fb51-4d67-a273-74f19d204ce2:1737490277951:37:S:CREATE TABLE Reservation_Table OF Reservation;
ce84a478-fb51-4d67-a273-74f19d204ce2:1737490277951:37:S:CREATE TABLE Reservation_Table OF Reservation;
dc191330-dd2d-4b65-a3fc-02244c7c7ed3:1737490278519:59:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
dc191330-dd2d-4b65-a3fc-02244c7c7ed3:1737490278519:59:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
05d4367c-bbbc-47ca-9b14-a19645c3775a:1737490281546:78:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
818194c4-bb91-4c20-b895-feb79b1145f7:1737490283236:135:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
818194c4-bb91-4c20-b895-feb79b1145f7:1737490283236:135:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
274a526f-d18d-4703-86ba-2a502ea169c8:1737490284050:58:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
274a526f-d18d-4703-86ba-2a502ea169c8:1737490284050:58:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
707525a6-b544-4064-a754-46cf6bc88be7:1737490287456:35:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
20bed720-cfaa-4b71-8e25-3ad6f21322b3:1737490287762:40:S:CREATE TABLE Passenger_Table OF Passenger;
20bed720-cfaa-4b71-8e25-3ad6f21322b3:1737490287762:40:S:CREATE TABLE Passenger_Table OF Passenger;
b8513e52-4ca5-435c-a15f-c6066e31104c:1737490288237:44:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
b8513e52-4ca5-435c-a15f-c6066e31104c:1737490288237:44:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
62d2716f-6bd4-4bc5-90aa-586da5666146:1737490290218:82:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
62ce8553-fa54-4996-8846-7e891b61ef97:1737490290824:68:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
62ce8553-fa54-4996-8846-7e891b61ef97:1737490290824:68:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
c4bf50b3-1b46-4dc4-a647-76b5349695b5:1737490292268:100:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
c4bf50b3-1b46-4dc4-a647-76b5349695b5:1737490292268:100:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
c3b22c0d-a468-4255-9418-34b33fd70366:1737490293196:90:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
80067b83-bde6-43d6-b242-ad014eeda147:1737490295238:39:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
319b4a8f-1dbb-48e4-9792-cee3bf3b8bcc:1737490296021:62:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
319b4a8f-1dbb-48e4-9792-cee3bf3b8bcc:1737490296021:62:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
7119f177-d551-4982-997f-e27fcd03fa45:1737490296605:40:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
7119f177-d551-4982-997f-e27fcd03fa45:1737490296605:40:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
01113a33-faa9-4dbe-b43c-734524dc835e:1737490323254:268:S:-------------------------------------------------------------------------------\ninsert into travelclass_table values ( travelclass(\n   1,\n   'Economy',\n   'Najtasza klasa, podstawowe udogodnienia'\n) );
9717cc2d-3127-4340-a2ac-7209a799cd82:1737490324566:15:S:insert into travelclass_table values ( travelclass(\n   2,\n   'Premium',\n   'Lepsze siedzenia, dodatkowe usugi'\n) );
f59ca786-dddf-48ae-929a-6986c8a9d0b0:1737490325163:13:S:insert into travelclass_table values ( travelclass(\n   3,\n   'Business',\n   'Wysoki komfort, szerokie fotele, priorytet'\n) );
3d7baa0a-1f5f-4842-9f60-abdc21799ea0:1737490325664:32:S:insert into role_table values ( role(\n   1,\n   'Pilot'\n) );
985960ea-9ced-472c-9ae9-19020975bb56:1737490325978:9:S:insert into role_table values ( role(\n   2,\n   'CoPilot'\n) );
29c08926-c82a-4c1f-abe0-2aee8f4596ce:1737490326317:12:S:insert into role_table values ( role(\n   3,\n   'Steward'\n) );
85a1d414-ca98-4d59-8fc6-f510f5b6a85d:1737490327494:27:S:-------------------------------------------------------------------------------\ninsert into airport_table values ( airport(\n   'WAW',\n   'Warsaw Chopin Airport',\n   'Warszawa, Polska',\n   technicalsupportlist()\n) );
728ff84f-ae1e-4ff5-b51f-f5ef47e28716:1737490328360:7:S:insert into airport_table values ( airport(\n   'KRK',\n   'Krakow Airport',\n   'Krakw, Polska',\n   technicalsupportlist()\n) );
5a01cdb3-9605-425e-9efd-e9d8b271e13a:1737490328990:26:S:insert into technicalsupport_table values ( technicalsupport(\n   1,\n   'Jan Kowalski',\n   'Elektronika',\n   timestamp '2025-01-20 06:00:00',\n   timestamp '2025-01-20 14:00:00',\n   'WAW'\n) );
3baa083a-0e7d-454f-8c5f-c4f0ce1f4479:1737490329440:7:S:insert into technicalsupport_table values ( technicalsupport(\n   2,\n   'Anna Nowak',\n   'Silniki',\n   timestamp '2025-01-20 14:00:00',\n   timestamp '2025-01-20 22:00:00',\n   'WAW'\n) );
216d8115-0e83-4ce8-a273-53de19c63c48:1737490349326:319:S:-------------------------------------------------------------------------------\ndeclare\n   v_economy  ref travelclass;\n   v_premium  ref travelclass;\n   v_business ref travelclass;\nbegin\n   select ref(t)\n     into v_economy\n     from travelclass_table t\n    where t.id = 1;\n   select ref(t)\n     into v_premium\n     from travelclass_table t\n    where t.id = 2;\n   select ref(t)\n     into v_business\n     from travelclass_table t\n    where t.id = 3;\n\n  -- Seats for Plane 1 (Small)\n   insert into planeseat_table values ( planeseat(\n      1,\n      1,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      1,\n      2,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      2,\n      1,\n      v_premium,\n      150.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      2,\n      2,\n      v_business,\n      200.0\n   ) );\n\n  -- Seats for Plane 2 (Large)\n   insert into planeseat_table values ( planeseat(\n      3,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      3,\n      2,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      4,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      4,\n      2,\n      v_premium,\n      280.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      5,\n      1,\n      v_business,\n      350.0\n   ) );\nend;\n/
dd60f3c9-bab2-4387-919e-3a95cbeba282:1737490351965:40:S:-------------------------------------------------------------------------------\ninsert into crewmember_table values ( crewmember(\n   1,\n   'Adam',\n   'Pilot',\n   date '1985-06-10',\n   'adam.pilot@airline.com',\n   '123456789',\n   'AB1234567',\n   rolelist(),\n   3000.0\n) );
748ce36c-ee97-4c66-b5f9-5d5b3bd24841:1737490353014:13:S:insert into crewmember_table values ( crewmember(\n   2,\n   'Ewa',\n   'CoPilot',\n   date '1990-03-15',\n   'ewa.copilot@airline.com',\n   '987654321',\n   'CD7654321',\n   rolelist(),\n   1500.0\n) );
c1f2e71d-6e6a-49a0-bf0b-11fca0202afc:1737490355138:187:S:-------------------------------------------------------------------------------\ndeclare\n   v_pilot   ref role;\n   v_copilot ref role;\nbegin\n   select ref(r)\n     into v_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_pilot)\n    where c.id = 1;\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_copilot)\n    where c.id = 2;\nend;\n/
a9f9ff4f-ded5-40f5-a189-789444e4acd0:1737490367601:505:S:-------------------------------------------------------------------------------\ndeclare\n   v_seats_small  planeseatlist := planeseatlist();\n   v_seats_big    planeseatlist := planeseatlist();\n   v_role_pilot   ref role;\n   v_role_copilot ref role;\nbegin\n   select ref(r)\n     into v_role_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_role_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n  -- Plane 1 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 1 and 2\n   ) loop\n      v_seats_small.extend(1);\n      v_seats_small(v_seats_small.count) := seat_ref.r;\n   end loop;\n\n  -- Plane 2 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 3 and 5\n   ) loop\n      v_seats_big.extend(1);\n      v_seats_big(v_seats_big.count) := seat_ref.r;\n   end loop;\n\n  -- Insert Planes\n   insert into plane_table values ( plane(\n      1,\n      v_seats_small,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\n   insert into plane_table values ( plane(\n      2,\n      v_seats_big,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\nend;\n/
9711bce3-a86a-4192-b6ab-4ac87c8bf974:1737490370683:34:S:-------------------------------------------------------------------------------\ninsert into passenger_table values ( passenger(\n   1,\n   'Piotr',\n   'Nowak',\n   date '2000-01-01',\n   'piotr.nowak@mail.com',\n   '123456789',\n   'PAS123',\n   null\n) );
e71b392a-aabc-4760-9cfb-ab1a8f73e8de:1737490371695:12:S:insert into passenger_table values ( passenger(\n   2,\n   'Anna',\n   'Kowalska',\n   date '1995-12-25',\n   'anna.kowalska@mail.com',\n   '987654321',\n   'PAS456',\n   null\n) );
3c135102-2acf-4983-80fd-73fe7225f6ac:1737490371999:19:S:commit;
79ddb067-7f25-4667-a961-e6e8e4ec4a91:1737490383517:62:S:declare\n   v_seats_taken planeseatlist := planeseatlist(); -- Initialize empty seat list\nbegin\n   insert into flight_table values ( flight(\n      1,                -- Flight ID\n      1,                -- Plane ID\n      timestamp '2025-02-01 09:00:00',  -- Departure\n      timestamp '2025-02-01 11:00:00',  -- Arrival\n      'WAW',            -- IATA_from\n      'KRK',            -- IATA_to\n      timestamp '2025-01-31 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   insert into flight_table values ( flight(\n      2,                -- Flight ID\n      2,                -- Plane ID\n      timestamp '2025-02-02 14:00:00',  -- Departure\n      timestamp '2025-02-02 17:00:00',  -- Arrival\n      'KRK',            -- IATA_from\n      'WAW',            -- IATA_to\n      timestamp '2025-02-01 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   commit;\nend;\n/
8bf547ff-2d82-42e8-87d0-c4c2c754a926:1737490498058:1183:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
72400d8e-c110-4def-864d-c69ef46971b2:1737490504901:1609:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
2c58593c-a4e5-48ce-bec3-5da4ff6378ce:1737491454650:1096:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
9d5334cc-57cc-49d5-a9bb-ebe0dc32e211:1737491461498:1038:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
31f9dcdd-3ce0-4870-bce9-d03062104dc1:1737491465258:49:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
4bfa47d4-d65b-4d75-a1c2-d2b6d408b199:1737491465722:46:S:CREATE TABLE TravelClass_Table OF TravelClass;
4bfa47d4-d65b-4d75-a1c2-d2b6d408b199:1737491465722:46:S:CREATE TABLE TravelClass_Table OF TravelClass;
3d8bc87a-512c-49ca-8a16-b897d71a24cb:1737491466813:75:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
3d8bc87a-512c-49ca-8a16-b897d71a24cb:1737491466813:75:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
84f27ce5-7de8-426b-8707-5f39981d77ae:1737491468118:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
65c26311-e157-4321-b3f3-99ff1e6ec063:1737491468376:26:S:CREATE TABLE Role_Table OF Role;
65c26311-e157-4321-b3f3-99ff1e6ec063:1737491468376:26:S:CREATE TABLE Role_Table OF Role;
7542c708-dbc2-47e5-8376-4c2b8f3763ff:1737491468854:32:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
7542c708-dbc2-47e5-8376-4c2b8f3763ff:1737491468854:32:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
e4a1df78-95e2-4e38-8bda-345556ec6613:1737491470690:27:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
02566379-b2ed-43bf-96e9-cc9d842125aa:1737491470891:21:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
02566379-b2ed-43bf-96e9-cc9d842125aa:1737491470891:21:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
a802054f-114e-48b7-8e83-e448808de8af:1737491471244:30:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
a802054f-114e-48b7-8e83-e448808de8af:1737491471244:30:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
32d8fc18-7761-4fd0-9d4a-d6d1bf5f42a8:1737491471683:22:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
fefefd32-97ca-48c1-aa0d-bb98e0d9209a:1737491471992:17:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
c85ff06c-c76a-451b-b950-6ef0cd7a1169:1737491472812:18:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
f5444a62-d8cc-4695-a50a-966215dd4018:1737491473014:24:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
f5444a62-d8cc-4695-a50a-966215dd4018:1737491473014:24:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
caa5742e-b04d-446c-8f08-38580241f025:1737491473344:24:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
caa5742e-b04d-446c-8f08-38580241f025:1737491473344:24:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
3bc524a4-e21e-4c3e-97c9-8cc8ac2dab37:1737491474333:19:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
1cb406a9-6536-48a5-8bc5-a4c0ec5d1fc2:1737491474680:49:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
1cb406a9-6536-48a5-8bc5-a4c0ec5d1fc2:1737491474680:49:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
06a6b648-ff53-4c8e-b14c-68e9935f3263:1737491475029:28:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
06a6b648-ff53-4c8e-b14c-68e9935f3263:1737491475029:28:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
0264ca85-800a-45c1-8c93-53f2e93916eb:1737491477042:45:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
54a83511-e7c5-45bc-9414-61de08cf6a86:1737491477788:107:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
54a83511-e7c5-45bc-9414-61de08cf6a86:1737491477788:107:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
e8aab434-38ae-4256-9cbb-73150558e237:1737491478760:77:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
e8aab434-38ae-4256-9cbb-73150558e237:1737491478760:77:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
99f8f815-5b33-4ce4-a8bc-81c253b52afa:1737491481307:53:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
2d4b6982-7b78-46aa-9cb1-38fe9f79c852:1737491482056:61:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
2d4b6982-7b78-46aa-9cb1-38fe9f79c852:1737491482056:61:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
bac7fce5-e7b9-4a48-bd86-b64afdf02112:1737491483027:51:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
bac7fce5-e7b9-4a48-bd86-b64afdf02112:1737491483027:51:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
60e76173-378b-485b-95e3-e3f5ebd1f476:1737491484887:37:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
c0e3329a-ddfd-4cd7-87d6-c2f636c7a6cd:1737491485247:36:S:CREATE TABLE Reservation_Table OF Reservation;
c0e3329a-ddfd-4cd7-87d6-c2f636c7a6cd:1737491485247:36:S:CREATE TABLE Reservation_Table OF Reservation;
ac928269-e1ad-4c77-872d-0137bda6af51:1737491486046:38:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
ac928269-e1ad-4c77-872d-0137bda6af51:1737491486046:38:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
4ebc22f8-b03f-4932-9c77-64d570984417:1737491490459:56:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
01842760-3400-471f-b738-0babb7e91f60:1737491491300:94:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
01842760-3400-471f-b738-0babb7e91f60:1737491491300:94:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
01f3a6c0-a03d-42ad-8c5d-30daeb0e3d03:1737491491965:47:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
01f3a6c0-a03d-42ad-8c5d-30daeb0e3d03:1737491491965:47:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
ed4694f4-4e8e-4df8-8774-8d84488f6eeb:1737491495021:34:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
a4ead4cf-3be6-48c6-b527-e97a16eb6ea7:1737491495321:31:S:CREATE TABLE Passenger_Table OF Passenger;
a4ead4cf-3be6-48c6-b527-e97a16eb6ea7:1737491495321:31:S:CREATE TABLE Passenger_Table OF Passenger;
cb8e5584-93dc-4154-9126-769b7d3ef647:1737491495811:34:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
cb8e5584-93dc-4154-9126-769b7d3ef647:1737491495811:34:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
7d0564ce-b872-4061-8f66-50a86efa2e69:1737491497392:58:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
f9b13296-da38-4099-b355-98b181be9b10:1737491498361:64:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
f9b13296-da38-4099-b355-98b181be9b10:1737491498361:64:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
dd6ff056-038e-4337-b003-ce959c63b4bf:1737491499225:57:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
dd6ff056-038e-4337-b003-ce959c63b4bf:1737491499225:57:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
e2fefb05-ad4d-4696-83bd-ad88f338e160:1737491500484:32:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
b06d58b7-9eeb-4263-990a-c68dc72c98ca:1737491502920:53:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
63129a29-1507-4073-95fc-6eca8e868e03:1737491503711:99:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
63129a29-1507-4073-95fc-6eca8e868e03:1737491503711:99:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
900baf48-17dc-40f0-8a9e-0f8dde3e730a:1737491504744:77:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
900baf48-17dc-40f0-8a9e-0f8dde3e730a:1737491504744:77:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
9405e49a-9077-4242-9e95-2bdcbe10c564:1737491620078:47:S:-------------------------------------------------------------------------------\ninsert into travelclass_table values ( travelclass(\n   1,\n   'Economy',\n   'Najtasza klasa, podstawowe udogodnienia'\n) );
886894c5-f110-43d8-a104-6fa2e420b176:1737491620907:14:S:insert into travelclass_table values ( travelclass(\n   2,\n   'Premium',\n   'Lepsze siedzenia, dodatkowe usugi'\n) );
11db8489-068a-4661-aa75-0759ffa878f6:1737491621624:10:S:insert into travelclass_table values ( travelclass(\n   3,\n   'Business',\n   'Wysoki komfort, szerokie fotele, priorytet'\n) );
d6f75d34-572f-4274-a8d4-f35d2d16b8b6:1737491622130:24:S:insert into role_table values ( role(\n   1,\n   'Pilot'\n) );
f366fa4f-bcd3-4c4c-a4c7-c468b014ff3b:1737491622420:7:S:insert into role_table values ( role(\n   2,\n   'CoPilot'\n) );
5c3b479c-1624-4341-aefd-a5d93a47748a:1737491622669:9:S:insert into role_table values ( role(\n   3,\n   'Steward'\n) );
592a7dd8-d4fa-4b43-9dc3-66bdae1126ea:1737491623359:24:S:-------------------------------------------------------------------------------\ninsert into airport_table values ( airport(\n   'WAW',\n   'Warsaw Chopin Airport',\n   'Warszawa, Polska',\n   technicalsupportlist()\n) );
af71d0de-2174-4b75-8ddf-11ee8b5c209b:1737491623874:8:S:insert into airport_table values ( airport(\n   'KRK',\n   'Krakow Airport',\n   'Krakw, Polska',\n   technicalsupportlist()\n) );
8b9c7086-bcc7-4728-84c6-e2b9ffe78ac9:1737491624481:19:S:insert into technicalsupport_table values ( technicalsupport(\n   1,\n   'Jan Kowalski',\n   'Elektronika',\n   timestamp '2025-01-20 06:00:00',\n   timestamp '2025-01-20 14:00:00',\n   'WAW'\n) );
e5ee3c22-e158-4af5-8eb4-a20e220153d2:1737491625048:11:S:insert into technicalsupport_table values ( technicalsupport(\n   2,\n   'Anna Nowak',\n   'Silniki',\n   timestamp '2025-01-20 14:00:00',\n   timestamp '2025-01-20 22:00:00',\n   'WAW'\n) );
57e8d3ab-bb61-4a25-81c7-ae6f4f98addf:1737491641563:59:S:-------------------------------------------------------------------------------\ninsert into crewmember_table values ( crewmember(\n   1,\n   'Adam',\n   'Pilot',\n   date '1985-06-10',\n   'adam.pilot@airline.com',\n   '123456789',\n   'AB1234567',\n   rolelist(),\n   3000.0\n) );
9d8459eb-a9da-4799-a9ed-5c3b1ee9aad7:1737491644360:10:S:insert into crewmember_table values ( crewmember(\n   2,\n   'Ewa',\n   'CoPilot',\n   date '1990-03-15',\n   'ewa.copilot@airline.com',\n   '987654321',\n   'CD7654321',\n   rolelist(),\n   1500.0\n) );
b2bb5d2c-e461-42af-b8c6-21b45fbc7761:1737491646121:148:S:-------------------------------------------------------------------------------\ndeclare\n   v_pilot   ref role;\n   v_copilot ref role;\nbegin\n   select ref(r)\n     into v_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_pilot)\n    where c.id = 1;\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_copilot)\n    where c.id = 2;\nend;\n/
b0b9de6f-3d68-4218-b65a-c29b07873d45:1737495920436:1095:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
a30743c6-20ae-4170-af34-2013c289df7b:1737495928856:1329:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
9886c90d-96b7-47c5-b7cf-f84c0fe9b085:1737495933553:84:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
ac49623d-2646-4a5b-aecb-1e73becc6cb9:1737495933911:54:S:CREATE TABLE TravelClass_Table OF TravelClass;
49a6b2de-49b2-467f-933a-a12329f70f71:1737495934085:0:F:/
abab7b5d-3ffe-4ab4-83ed-eb6100be6c68:1737495934793:45:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
9ca9909b-0676-4099-a75a-498c4312286a:1737495934964:0:F:/
51167000-02bc-4043-896f-139f52ced1ff:1737495936140:29:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
630bcb22-b8fd-4795-a794-a00bdb801424:1737495936355:19:S:CREATE TABLE Role_Table OF Role;
43aa465d-7e4c-4ea7-a1ee-4290e4b0f1fb:1737495936461:0:F:/
5b46f9c4-6b6b-4c7e-866d-98ddc15ccb7d:1737495936827:47:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
a916a11c-8deb-47d1-8f1c-7f4ddc8ec751:1737495936971:0:F:/
bcbc97b4-ecab-457f-92a6-6a3fdcfb5aee:1737495939055:20:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    Id              INT,\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
87f3af77-5262-496d-a593-356d167a96bf:1737495939255:32:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
dc439057-b42f-42dd-a72d-d198105aa8c2:1737495939374:0:F:/
962c24da-064b-4490-8fbf-498f8904d7fc:1737495939662:31:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
d5ffbfbe-b7db-46b0-ae62-b131d1f0221c:1737495939773:0:F:/
ef6db232-5c4f-44e4-aeae-86f2e76eadf2:1737495940149:30:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
2f9a0793-c02c-4249-b466-f52ed7b76673:1737495940647:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
134e6ddb-8aa6-4fad-88c2-339be7a7fc19:1737495941464:20:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
e529740c-9895-44c9-b159-4cc51c6f86d4:1737495941663:20:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
341088f0-c482-4593-b70a-d7f159696de1:1737495941765:0:F:/
a441997a-7b56-4795-bdf7-3244d66d1388:1737495942052:37:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
f6e67259-89a5-4676-b539-9af90d9fa04d:1737495942174:0:F:/
8f4a874f-3ab7-4ea4-a611-4e10a0ce2415:1737495943087:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
f0297787-be35-4441-bf96-0b4ce0f2feb5:1737495944225:97:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
90bbb77b-f9d6-4a89-abb2-e631b7755b7a:1737495944411:0:F:/
a3beb28f-fc4c-4724-b1e8-f832d4db8bef:1737495944728:32:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
b2306785-8e3a-4a1f-93e6-6c51e8911b1f:1737495944849:0:F:/
5d9e25f8-273e-4bd7-b9dc-b7fefaa3c1e9:1737495947367:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
a0ea6aaf-d6a6-4f5f-95b2-7eeb0f8f46d1:1737495947689:54:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
05af63d7-1b03-4b92-a8a1-64ceaa79aad7:1737495947826:0:F:/
26be47cd-6a32-44e9-a8e9-8b753f67204f:1737495948071:32:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
dd8baa52-2cf5-4d0d-8473-70886c68024f:1737495948175:0:F:/
140fadfb-31db-457f-95c4-674418ebd70f:1737495949550:27:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
bb383239-a558-4699-b35f-9100d4bf2ae4:1737495949766:28:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
c92b2470-5aeb-4533-85c5-84ff10819dca:1737495949871:0:F:/
48e99f44-8bd7-4d24-a267-3bef07153b66:1737495950152:44:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
97d9f002-3a5b-4b73-b7ae-bcb3f9dbb29a:1737495950283:0:F:/
254a5449-08f6-49a9-bace-476b2c954e3b:1737495951530:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
2f494d75-b34a-4657-9c4f-2411e8f23439:1737495951731:68:S:CREATE TABLE Reservation_Table OF Reservation;
a18df8ef-7040-4618-bec8-5006a3bbe389:1737495951878:0:F:/
95f5c638-9a59-484b-b50a-fd79d2057eef:1737495952149:32:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
01cc721b-f7f5-485b-9755-b53e8835be68:1737495952258:0:F:/
c165e84f-a6c8-49fd-85df-083d6ccc1915:1737495954256:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
5deb26fe-9588-4dd1-8498-0d2fd3c1cbd5:1737495954868:70:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
257c6dec-f79f-456f-8921-a88d59d66c33:1737495955012:0:F:/
089298ab-b737-44e7-98f9-19346c949ed2:1737495955222:36:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
ab330b20-cc49-4447-bef2-c24a97a5895e:1737495955343:0:F:/
97970d41-5357-4a00-8717-e739f823bd41:1737495959407:50:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
854438b0-bb41-436e-914f-5b94b7d8155a:1737495959783:50:S:CREATE TABLE Passenger_Table OF Passenger;
e4d375a1-d85e-4253-a737-1ce6c454569c:1737495959965:0:F:/
935f654b-a548-4da1-92c1-a7d77e2f3954:1737495960695:55:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
e6a17bb1-7135-4d3e-a490-5a38ef6b8c92:1737495960882:0:F:/
694ff858-1a10-4bf9-b69a-72113be56231:1737495962584:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
497a7cfd-f2c5-4583-b837-caa270d1997f:1737495962815:25:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
e07d29e7-bba0-44db-bcce-a9da59a03350:1737495962912:0:F:/
a85dc573-3b05-4758-86c6-371c7fb832c8:1737495963194:27:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
805fa881-986a-46c5-865d-2629c12388a1:1737495963299:0:F:/
df85d5d9-8fe5-4e95-9fa7-66bdf56b06a3:1737495963616:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
6c63f2cb-e59a-4ef5-9ea9-727714ccec64:1737495964798:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
e414f703-5bc6-482b-82bb-8440373cd53e:1737495965060:50:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
9e7f2081-5029-49ee-90ec-0b8005521187:1737495965189:0:F:/
7a51c8e5-e1d2-44fe-8a66-4c64b3504f97:1737495965397:31:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
29cf9861-875b-4b35-8607-0d316390f965:1737495965514:0:F:/
153c6ba9-9fa5-4654-bb98-25fae2d42f97:1737495988814:119:S:-------------------------------------------------------------------------------\ninsert into travelclass_table values ( travelclass(\n   1,\n   'Economy',\n   'Najtasza klasa, podstawowe udogodnienia'\n) );
4730dcce-bd1b-45bb-a227-5d0b9e98cac9:1737495989637:15:S:insert into travelclass_table values ( travelclass(\n   2,\n   'Premium',\n   'Lepsze siedzenia, dodatkowe usugi'\n) );
fd9b32f1-3b97-4d02-850a-c86336d579c1:1737495990425:13:S:insert into travelclass_table values ( travelclass(\n   3,\n   'Business',\n   'Wysoki komfort, szerokie fotele, priorytet'\n) );
6cef7771-41f0-4422-b966-35c60425c130:1737495990834:23:S:insert into role_table values ( role(\n   1,\n   'Pilot'\n) );
bc440832-c257-48cd-988d-7bc295ce0193:1737495991200:6:S:insert into role_table values ( role(\n   2,\n   'CoPilot'\n) );
58a97f86-8105-40ca-8db9-6788aea39526:1737495991529:4:S:insert into role_table values ( role(\n   3,\n   'Steward'\n) );
50650854-4693-439e-ac36-55c06c0aae3d:1737495992418:36:S:-------------------------------------------------------------------------------\ninsert into airport_table values ( airport(\n   'WAW',\n   'Warsaw Chopin Airport',\n   'Warszawa, Polska',\n   technicalsupportlist()\n) );
da25ea64-6d46-4930-bebe-c38e6d559db7:1737495992943:11:S:insert into airport_table values ( airport(\n   'KRK',\n   'Krakow Airport',\n   'Krakw, Polska',\n   technicalsupportlist()\n) );
4691ee52-c006-4f53-97e9-06a0a0e5270a:1737495993734:21:S:insert into technicalsupport_table values ( technicalsupport(\n   1,\n   'Jan Kowalski',\n   'Elektronika',\n   timestamp '2025-01-20 06:00:00',\n   timestamp '2025-01-20 14:00:00',\n   'WAW'\n) );
f42ed291-523c-4c7f-baea-2a3d65c31246:1737495994467:5:S:insert into technicalsupport_table values ( technicalsupport(\n   2,\n   'Anna Nowak',\n   'Silniki',\n   timestamp '2025-01-20 14:00:00',\n   timestamp '2025-01-20 22:00:00',\n   'WAW'\n) );
1fbfaa21-474e-498a-aa1a-3bfcef2f1201:1737496014618:0:F:-------------------------------------------------------------------------------\ndeclare\n   v_economy  ref travelclass;\n   v_premium  ref travelclass;\n   v_business ref travelclass;\nbegin\n   select ref(t)\n     into v_economy\n     from travelclass_table t\n    where t.id = 1;\n   select ref(t)\n     into v_premium\n     from travelclass_table t\n    where t.id = 2;\n   select ref(t)\n     into v_business\n     from travelclass_table t\n    where t.id = 3;\n\n  -- Seats for Plane 1 (Small)\n   insert into planeseat_table values ( planeseat(\n      1,\n      1,\n      1,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      2,\n      1,\n      2,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      3,\n      2,\n      1,\n      v_premium,\n      150.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      4,\n      2,\n      2,\n      v_business,\n      200.0\n   ) );\n\n  -- Seats for Plane 2 (Large)\n   insert into planeseat_table values ( planeseat(\n      5,\n      1,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      6,\n      1,\n      2,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      7,\n      2,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      8,\n      2,\n      2,\n      v_premium,\n      280.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      9,\n      3,\n      1,\n      v_business,\n      350.0\n   ) );\nend;\n/
6fa8ea3e-d766-4638-a670-cf5cc2cdea65:1737496018592:28:S:-------------------------------------------------------------------------------\ninsert into crewmember_table values ( crewmember(\n   1,\n   'Adam',\n   'Pilot',\n   date '1985-06-10',\n   'adam.pilot@airline.com',\n   '123456789',\n   'AB1234567',\n   rolelist(),\n   3000.0\n) );
20f1a2d2-1626-4a5d-ac20-e3eeda24e76a:1737496019382:10:S:insert into crewmember_table values ( crewmember(\n   2,\n   'Ewa',\n   'CoPilot',\n   date '1990-03-15',\n   'ewa.copilot@airline.com',\n   '987654321',\n   'CD7654321',\n   rolelist(),\n   1500.0\n) );
9255edab-f7cd-4c5a-8be9-7baacf38eca5:1737496021143:160:S:-------------------------------------------------------------------------------\ndeclare\n   v_pilot   ref role;\n   v_copilot ref role;\nbegin\n   select ref(r)\n     into v_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_pilot)\n    where c.id = 1;\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_copilot)\n    where c.id = 2;\nend;\n/
222e1898-577c-48de-b70e-6dfc8e8aff80:1737496033499:322:S:-------------------------------------------------------------------------------\ndeclare\n   v_seats_small  planeseatlist := planeseatlist();\n   v_seats_big    planeseatlist := planeseatlist();\n   v_role_pilot   ref role;\n   v_role_copilot ref role;\nbegin\n   select ref(r)\n     into v_role_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_role_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n  -- Plane 1 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 1 and 2\n   ) loop\n      v_seats_small.extend(1);\n      v_seats_small(v_seats_small.count) := seat_ref.r;\n   end loop;\n\n  -- Plane 2 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 3 and 5\n   ) loop\n      v_seats_big.extend(1);\n      v_seats_big(v_seats_big.count) := seat_ref.r;\n   end loop;\n\n  -- Insert Planes\n   insert into plane_table values ( plane(\n      1,\n      v_seats_small,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\n   insert into plane_table values ( plane(\n      2,\n      v_seats_big,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\nend;\n/
0c8a8cb2-8744-4500-a373-5bef570fbda8:1737496036769:31:S:-------------------------------------------------------------------------------\ninsert into passenger_table values ( passenger(\n   1,\n   'Piotr',\n   'Nowak',\n   date '2000-01-01',\n   'piotr.nowak@mail.com',\n   '123456789',\n   'PAS123',\n   null\n) );
e56f1305-80cd-4fad-a9f4-fb4ae3d3d0df:1737496037717:10:S:insert into passenger_table values ( passenger(\n   2,\n   'Anna',\n   'Kowalska',\n   date '1995-12-25',\n   'anna.kowalska@mail.com',\n   '987654321',\n   'PAS456',\n   null\n) );
4429d5fc-022f-44f8-9139-77c1c12b227a:1737496037980:13:S:commit;
66cbd42a-71b0-4476-be36-25a17ef1dc0f:1737496047746:64:S:declare\n   v_seats_taken planeseatlist := planeseatlist(); -- Initialize empty seat list\nbegin\n   insert into flight_table values ( flight(\n      1,                -- Flight ID\n      1,                -- Plane ID\n      timestamp '2025-02-01 09:00:00',  -- Departure\n      timestamp '2025-02-01 11:00:00',  -- Arrival\n      'WAW',            -- IATA_from\n      'KRK',            -- IATA_to\n      timestamp '2025-01-31 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   insert into flight_table values ( flight(\n      2,                -- Flight ID\n      2,                -- Plane ID\n      timestamp '2025-02-02 14:00:00',  -- Departure\n      timestamp '2025-02-02 17:00:00',  -- Arrival\n      'KRK',            -- IATA_from\n      'WAW',            -- IATA_to\n      timestamp '2025-02-01 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   commit;\nend;\n/
681ca74a-9667-4500-a75d-d643577f6442:1737496532043:0:S:SET SERVEROUTPUT ON;
f32c8603-0707-4cc9-bba4-c8f38889a185:1737496535358:53:S:create or replace package flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   );\n   procedure take_seat_at_plane (\n      reservation_list in sys.odcinumberlist, -- List of Reservation IDs\n      seat_list        in sys.odcinumberlist         -- List of Seat IDs\n   );\nend flight_management;\n/
3f38bcbd-4a7e-47fe-b83e-87b4eb04f877:1737496573382:1072:S:create or replace package body flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   ) is\n      plane_obj    plane; -- Variable to hold the Plane object\n      seat_refs    planeseatlist; -- Nested table of REF PlaneSeat\n      seat_ref     ref planeseat; -- REF variable for PlaneSeat\n      seat         planeseat; -- Variable to hold the dereferenced PlaneSeat\n      current_row  int := -1; -- Keeps track of the current row\n      seat_display varchar2(500); -- To build the seat display for a row\n   begin\n        -- Retrieve the Plane object by ID\n      select value(p)\n        into plane_obj\n        from plane_table p\n       where p.id = plane_id;\n\n        -- Assign the nested table of seat references\n      seat_refs := plane_obj.seat_list;\n\n        -- Loop through the nested table\n      if seat_refs is not null then\n         for i in 1..seat_refs.count loop\n            seat_ref := seat_refs(i);\n\n                -- Dereference the seat\n            select deref(seat_ref)\n              into seat\n              from dual;\n\n                -- Check if we are on a new row\n            if seat.seatrow != current_row then\n                    -- Print the previous row (if exists) and reset for the new row\n               if current_row != -1 then\n                  dbms_output.put_line(seat_display);\n               end if;\n\n                    -- Start a new row\n               current_row := seat.seatrow;\n               seat_display := '';\n            end if;\n\n                -- Append the seat (e.g., 1A) to the current row display\n            seat_display := seat_display\n                            || seat.seatrow\n                            || chr(64 + seat.seatcolumn)\n                            || ' ';\n         end loop;\n\n            -- Print the final row\n         if current_row != -1 then\n            dbms_output.put_line(seat_display);\n         end if;\n      else\n         dbms_output.put_line('No seats found for Plane ID ' || plane_id);\n      end if;\n   exception\n      when no_data_found then\n         dbms_output.put_line('No plane found with ID ' || plane_id);\n      when others then\n         dbms_output.put_line('An error occurred: ' || sqlerrm);\n   end show_plane_seats_distribution;\n\n   procedure take_seat_at_plane (\n      reservation_list in sys.odcinumberlist,\n      seat_list        in sys.odcinumberlist\n   ) is\n      reservation_obj reservation; -- Variable to hold the reservation\n      current_seat    ref planeseat; -- Current seat reference of the reservation\n      new_seat        ref planeseat; -- New seat reference to be assigned\n   begin\n        -- Iterate over reservations and seats\n      for i in 1..reservation_list.count loop\n            -- Fetch the reservation object\n         select value(r)\n           into reservation_obj\n           from reservation_table r\n          where r.id = reservation_list(i);\n\n            -- Check if the reservation already has a seat\n         if reservation_obj.seat is not null then\n                -- Release the current seat\n            reservation_obj.seat := null;\n\n                -- Update the reservation table\n            update reservation_table r\n               set\n               r.seat = null\n             where r.id = reservation_list(i);\n         end if;\n\n            -- Assign the new seat\n         select ref(s)\n           into new_seat\n           from planeseat_table s\n          where s.seatrow = seat_list(i); -- Assuming seat_list contains row identifiers\n\n         reservation_obj.seat := new_seat;\n\n            -- Update the reservation table with the new seat\n         update reservation_table r\n            set\n            r.seat = new_seat\n          where r.id = reservation_list(i);\n      end loop;\n   exception\n      when no_data_found then\n         dbms_output.put_line('Reservation or seat not found.');\n      when others then\n         dbms_output.put_line('An error occurred: ' || sqlerrm);\n   end take_seat_at_plane;\nend flight_management;\n/
3821af3e-0d89-4fb7-afeb-7fe6a1ee3ff9:1737496681093:238:S:select username,\n       osuser,\n       machine,\n       schemaname\n  from gv$session\n where sid = (\n   select sys_context(\n      'userenv',\n      'sid'\n   )\n     from dual\n);
546425d1-a6e3-4928-83c3-5c1483ba7d06:1737496686402:14:S:-------------------------------------------------------------------------------\ncreate or replace view v_travelclass_stats as\n   select t.class_name as class_name,\n          count(*) as seat_count,\n          min(ps.price) as min_price,\n          max(ps.price) as max_price,\n          round(\n             avg(ps.price),\n             2\n          ) as avg_price\n     from planeseat_table ps\n     join travelclass_table t\n   on ps.travelclassref = ref(t)\n    group by t.class_name;
17498725-1f2d-4531-b3d2-3151812de11c:1737496687786:16:S:create or replace view v_plane_seatcount as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.seat_list )\n          ) as seat_count\n     from plane_table p;
9c4fb9e9-d72d-45b8-acc0-032a88773272:1737496689377:10:S:create or replace view v_plane_requiredroles as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.required_role_list )\n          ) as required_roles_count\n     from plane_table p;
0166f4e6-5c45-405f-9363-a470898ddb49:1737496691598:12:S:create or replace view v_crewmember_rolecount as\n   select c.id as crew_member_id,\n          c.first_name\n          || ' '\n          || c.last_name as full_name,\n          (\n             select count(*)\n               from table ( c.roles_list )\n          ) as role_count\n     from crewmember_table c;
3f225a01-1513-4e34-9f87-bd97d02de123:1737496693472:12:S:create or replace view v_airport_techsupport as\n   select a.iata as airport_iata,\n          a.name as airport_name,\n          (\n             select count(*)\n               from table ( a.technical_support_list )\n          ) as tech_support_count\n     from airport_table a;
966ff619-0f82-4e8b-94db-b5d401364ca4:1737496697254:10:S:create or replace view v_flights_seatings as\n   select f.id as flight_id,\n          p.id as plane_id,\n          ( deref(s.column_value) ).seatrow as seat_row,\n          ( deref(s.column_value) ).seatcolumn as seat_column,\n          ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n          ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n          ( deref(s.column_value) ).price as price\n     from flight_table f\n     join plane_table p\n   on f.plane_id = p.id\n    cross join table ( cast(p.seat_list as planeseatlist) ) s;
1f10a81a-1f15-42fb-a141-4cda50ed74e2:1737496697620:52:S:-------------------------------------------------------------------------------\nselect *\n  from v_travelclass_stats;
647cd6f6-9e43-425a-8ffa-163e3fd85a84:1737496697766:59:S:select *\n  from v_plane_seatcount;
c02f7284-490c-4d5d-a63a-8d61ce070b6e:1737496697919:18:S:select *\n  from v_plane_requiredroles;
3c7ed4a2-8d10-4e34-8031-7406f2bc3ceb:1737496698033:23:S:select *\n  from v_crewmember_rolecount;
4317caa2-7c69-4231-a3fe-6d59023529f8:1737496698148:18:S:select *\n  from v_airport_techsupport;
eb76fb0e-e333-4c55-84ad-f09786c4576f:1737496698318:24:S:select *\n  from v_flights_seatings;
2b52ba0f-eaf7-4c46-85c5-1688c6459f53:1737496926851:516:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
08bbb482-e1c9-4fdd-b73f-484054267d6a:1737496929656:650:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
8130f732-e568-4e87-8990-2e17e7ae8d1d:1737496933137:45:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
fcb63219-265a-4dc5-a35a-ad635c273fbb:1737496933706:69:S:CREATE TABLE TravelClass_Table OF TravelClass;
3bd230f0-9bd5-46b9-a552-4182fee361d6:1737496933903:0:F:/
c3193f6d-2135-4efa-89a9-4dcc25cd363d:1737496935528:51:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
ab0093f9-09d9-4103-a982-98e1f641387d:1737496935724:0:F:/
6524aa19-bcdd-4c89-83c0-ed960079be1d:1737496936564:42:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
1b2a6790-4e7d-40df-8223-941c73a74dbd:1737496936837:23:S:CREATE TABLE Role_Table OF Role;
2f6a551f-47e7-4c7e-9ca0-6881be3804e4:1737496936927:0:F:/
53fa4314-f5b5-4c45-a8c9-e0e06615ee1c:1737496937142:27:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
97c093f3-46e8-4f8f-a133-1689e40b9a57:1737496937241:0:F:/
41c69ab7-f3f5-48d1-bfda-26d263ab26a3:1737496938780:27:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    Id              INT,\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
85660d82-8f50-4426-9ade-f27db53bf60d:1737496938990:24:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
3fced395-a0c5-4244-86b4-86395b41a420:1737496939101:0:F:/
4e3d1ee2-3027-41ba-b571-5704bca2cd6e:1737496939353:29:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (SeatRow, SeatColumn);
12f2179a-7350-452e-bf0b-5bf3ed0204e6:1737496939460:0:F:/
4fa9e58e-0c78-44ab-9f5c-b887b968d328:1737496939792:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
5eb62f74-1f4f-4432-9b56-91ec9e3a084a:1737496940144:18:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
5919f810-84f8-41ae-ad1c-026646e011eb:1737496941114:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
b1002baf-2a4e-4f48-9e4f-3dccfd0ad517:1737496941337:36:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
691fbd8c-e7b1-4002-8343-84b8369ae3ce:1737496941453:0:F:/
28a8b954-8fd7-49da-a423-762144455dd0:1737496941703:29:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
63031d3f-a8ac-42fe-b531-7b394e7c6ae6:1737496941811:0:F:/
a0f648c6-3946-4a90-a88d-069bbaa373fa:1737496942715:27:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
62737d79-c250-48a3-b40c-4a6de54fc7c3:1737496943083:57:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
e5bb8c85-b5fe-4b72-bcf4-a213966b16be:1737496943214:0:F:/
f9d427af-2f50-47d6-a11c-f569288c3e10:1737496943443:30:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
ece3a914-f4b8-42da-ac32-568fc86354a3:1737496943566:0:F:/
0bb054a6-0d12-4905-bcbb-2b30ff5fadea:1737496945610:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
3851ad5f-c51d-46f6-a9c5-1ca3734f4be6:1737496946063:60:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
899eb31e-3237-47f1-8927-fe5eee0298a7:1737496946231:0:F:/
f66d4070-17cc-4aef-a275-a43789e4cd31:1737496946462:45:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
619c672d-bd09-4e7c-bc69-fbd8e8f22473:1737496946583:0:F:/
218f2e08-b21a-495f-a517-bbfb5847d2d0:1737496947419:23:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
a9233a7a-9315-434a-b55b-40a6f21ae215:1737496947616:25:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
966811cc-d60b-46a8-8329-467ef82beca3:1737496947719:0:F:/
4ab463b8-5d6c-4d5e-b1a4-ead04db37919:1737496947964:57:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
4681e31a-8b2a-42cf-b6b9-52a077d98cb6:1737496948100:0:F:/
78c755af-e449-47cf-b796-5601981d163b:1737496949092:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
9118b7af-67aa-492f-a6e4-345454b01cfe:1737496949292:20:S:CREATE TABLE Reservation_Table OF Reservation;
ee37db43-003d-4cd1-b80f-38bd9adb1748:1737496949391:0:F:/
e4c13e75-7270-43a6-b3cb-d0b908885e15:1737496949632:27:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
6e162964-54dc-4031-946f-3688f49e0357:1737496949736:0:F:/
5a1fb342-8bf9-4fa9-a15a-8e72ffaf600b:1737496951731:29:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
994fb7b0-c69a-4f1e-9e38-47efade85b15:1737496952103:55:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
e69454d7-a63d-49ae-a1ee-e06e18468452:1737496952232:0:F:/
2663be8d-83cb-421f-b3b5-11627c4d25f1:1737496952455:43:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
dbe327c0-0208-4313-af31-f277707607fe:1737496952589:0:F:/
c83b30aa-cfcf-4bf9-a209-1ad2c6ad188f:1737496954155:25:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
b30af5f6-d0e4-47a0-9732-045b129ad1d6:1737496954364:28:S:CREATE TABLE Passenger_Table OF Passenger;
d8fba629-2376-4788-b859-b30c9b279505:1737496954471:0:F:/
5722c047-505e-432b-8ecb-d53454715fdd:1737496954689:27:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
72d55a3f-761e-41c7-8b39-7d57119531f0:1737496954793:0:F:/
a6608dc7-edd8-432d-b6c2-c2f053158b72:1737496955833:23:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
fd25e854-024f-4db8-86aa-7f81596c38c7:1737496956030:24:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
ca9106df-e726-41e0-9f25-ef1f93d4e66f:1737496956130:0:F:/
85ebb235-7a27-49d3-8fd4-dd54830ed687:1737496956362:32:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
17c394a7-634c-467a-9eaa-5be8d1842087:1737496956472:0:F:/
2d6bcfc6-52e7-42dc-b1f2-91aab98828b7:1737496957002:35:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
35eed702-fa24-4019-bc73-8f2746ecc0d7:1737496958359:24:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
82a68892-e239-4479-91df-4968b8e0fbba:1737496958703:45:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
95495ecc-f086-4def-b8f1-f2807e3b2ff9:1737496958827:0:F:/
894ca3a8-e607-4a60-87ce-d2cabcb36c8b:1737496959055:28:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
ba3ada3c-3de2-4ed9-b417-e0f7035741f0:1737496959159:0:F:/
ace540cf-6b4c-4c9d-aebb-4c2763cc8029:1737496985068:160:S:-------------------------------------------------------------------------------\ninsert into travelclass_table values ( travelclass(\n   1,\n   'Economy',\n   'Najtasza klasa, podstawowe udogodnienia'\n) );
5e475753-b062-4525-8942-9c0d22cf0a85:1737496986000:16:S:insert into travelclass_table values ( travelclass(\n   2,\n   'Premium',\n   'Lepsze siedzenia, dodatkowe usugi'\n) );
85dbf0d9-935c-44b1-9f1d-ec548f6eed19:1737496986693:11:S:insert into travelclass_table values ( travelclass(\n   3,\n   'Business',\n   'Wysoki komfort, szerokie fotele, priorytet'\n) );
a8441617-17a4-49a0-9bf7-37d7048fed5b:1737496987200:28:S:insert into role_table values ( role(\n   1,\n   'Pilot'\n) );
3e915afa-3045-49d7-94b5-5745067e5b0e:1737496987568:12:S:insert into role_table values ( role(\n   2,\n   'CoPilot'\n) );
08c89899-3a77-476f-b3d5-227c058c64f4:1737496987846:9:S:insert into role_table values ( role(\n   3,\n   'Steward'\n) );
26bb6f1c-e373-433c-9e1c-35ae6f178931:1737496988581:27:S:-------------------------------------------------------------------------------\ninsert into airport_table values ( airport(\n   'WAW',\n   'Warsaw Chopin Airport',\n   'Warszawa, Polska',\n   technicalsupportlist()\n) );
f2dddd28-560a-4a62-9bfd-dda90d48e671:1737496989206:9:S:insert into airport_table values ( airport(\n   'KRK',\n   'Krakow Airport',\n   'Krakw, Polska',\n   technicalsupportlist()\n) );
0260a10f-cb3a-452a-a6b0-b3d64491e78f:1737496989986:23:S:insert into technicalsupport_table values ( technicalsupport(\n   1,\n   'Jan Kowalski',\n   'Elektronika',\n   timestamp '2025-01-20 06:00:00',\n   timestamp '2025-01-20 14:00:00',\n   'WAW'\n) );
217487d9-ea9d-4115-9a4d-04bde63d3fd2:1737496990481:6:S:insert into technicalsupport_table values ( technicalsupport(\n   2,\n   'Anna Nowak',\n   'Silniki',\n   timestamp '2025-01-20 14:00:00',\n   timestamp '2025-01-20 22:00:00',\n   'WAW'\n) );
cc9e3461-ce85-4eb0-bcf3-7b29c23609f6:1737497000220:0:F:-------------------------------------------------------------------------------\ndeclare\n   v_economy  ref travelclass;\n   v_premium  ref travelclass;\n   v_business ref travelclass;\nbegin\n   select ref(t)\n     into v_economy\n     from travelclass_table t\n    where t.id = 1;\n   select ref(t)\n     into v_premium\n     from travelclass_table t\n    where t.id = 2;\n   select ref(t)\n     into v_business\n     from travelclass_table t\n    where t.id = 3;\n\n  -- Seats for Plane 1 (Small)\n   insert into planeseat_table values ( planeseat(\n      1,\n      1,\n      1,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      2,\n      1,\n      2,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      3,\n      2,\n      1,\n      v_premium,\n      150.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      4,\n      2,\n      2,\n      v_business,\n      200.0\n   ) );\n\n  -- Seats for Plane 2 (Large)\n   insert into planeseat_table values ( planeseat(\n      5,\n      1,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      6,\n      1,\n      2,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      7,\n      2,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      8,\n      2,\n      2,\n      v_premium,\n      280.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      9,\n      3,\n      1,\n      v_business,\n      350.0\n   ) );\nend;\n/
23046f11-f5e6-477c-84a4-9aea35dc5df3:1737497001086:22:S:-------------------------------------------------------------------------------\ninsert into crewmember_table values ( crewmember(\n   1,\n   'Adam',\n   'Pilot',\n   date '1985-06-10',\n   'adam.pilot@airline.com',\n   '123456789',\n   'AB1234567',\n   rolelist(),\n   3000.0\n) );
d76df819-83fb-4007-8dd2-c793664d329d:1737497001738:8:S:insert into crewmember_table values ( crewmember(\n   2,\n   'Ewa',\n   'CoPilot',\n   date '1990-03-15',\n   'ewa.copilot@airline.com',\n   '987654321',\n   'CD7654321',\n   rolelist(),\n   1500.0\n) );
06715697-95b8-4c23-9b04-9d81cba15a97:1737497003386:104:S:-------------------------------------------------------------------------------\ndeclare\n   v_pilot   ref role;\n   v_copilot ref role;\nbegin\n   select ref(r)\n     into v_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_pilot)\n    where c.id = 1;\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_copilot)\n    where c.id = 2;\nend;\n/
cf45f9cc-2a8e-46fd-97ab-7ed88b620023:1737497014883:440:S:-------------------------------------------------------------------------------\ndeclare\n   v_seats_small  planeseatlist := planeseatlist();\n   v_seats_big    planeseatlist := planeseatlist();\n   v_role_pilot   ref role;\n   v_role_copilot ref role;\nbegin\n   select ref(r)\n     into v_role_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_role_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n  -- Plane 1 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 1 and 4\n   ) loop\n      v_seats_small.extend(1);\n      v_seats_small(v_seats_small.count) := seat_ref.r;\n   end loop;\n\n  -- Plane 2 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.seatrow between 5 and 9\n   ) loop\n      v_seats_big.extend(1);\n      v_seats_big(v_seats_big.count) := seat_ref.r;\n   end loop;\n\n  -- Insert Planes\n   insert into plane_table values ( plane(\n      1,\n      v_seats_small,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\n   insert into plane_table values ( plane(\n      2,\n      v_seats_big,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\nend;\n/
77def80a-1b5b-46b7-90a1-1888f7e8f997:1737497017514:85:S:-------------------------------------------------------------------------------\ninsert into passenger_table values ( passenger(\n   1,\n   'Piotr',\n   'Nowak',\n   date '2000-01-01',\n   'piotr.nowak@mail.com',\n   '123456789',\n   'PAS123',\n   null\n) );
8716084f-230a-40e4-9919-793e344bd787:1737497018710:12:S:insert into passenger_table values ( passenger(\n   2,\n   'Anna',\n   'Kowalska',\n   date '1995-12-25',\n   'anna.kowalska@mail.com',\n   '987654321',\n   'PAS456',\n   null\n) );
3ddda870-f397-46a0-80ad-d82ca40ddacf:1737497018971:8:S:commit;
a586303a-550c-48ea-ab86-2e65c4dc09fe:1737497029329:88:S:declare\n   v_seats_taken planeseatlist := planeseatlist(); -- Initialize empty seat list\nbegin\n   insert into flight_table values ( flight(\n      1,                -- Flight ID\n      1,                -- Plane ID\n      timestamp '2025-02-01 09:00:00',  -- Departure\n      timestamp '2025-02-01 11:00:00',  -- Arrival\n      'WAW',            -- IATA_from\n      'KRK',            -- IATA_to\n      timestamp '2025-01-31 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   insert into flight_table values ( flight(\n      2,                -- Flight ID\n      2,                -- Plane ID\n      timestamp '2025-02-02 14:00:00',  -- Departure\n      timestamp '2025-02-02 17:00:00',  -- Arrival\n      'KRK',            -- IATA_from\n      'WAW',            -- IATA_to\n      timestamp '2025-02-01 23:59:00',  -- Reservation Closing\n      v_seats_taken,    -- Empty seats list for now\n      rolelist()        -- Empty crew list for now\n   ) );\n\n   commit;\nend;\n/
936c8c2c-bc01-4d3f-8f45-b346fda044c7:1737497056117:49:S:select username,\n       osuser,\n       machine,\n       schemaname\n  from gv$session\n where sid = (\n   select sys_context(\n      'userenv',\n      'sid'\n   )\n     from dual\n);
8b4e7425-c475-485e-88a6-e1fb63064a7d:1737497061669:14:S:-------------------------------------------------------------------------------\ncreate or replace view v_travelclass_stats as\n   select t.class_name as class_name,\n          count(*) as seat_count,\n          min(ps.price) as min_price,\n          max(ps.price) as max_price,\n          round(\n             avg(ps.price),\n             2\n          ) as avg_price\n     from planeseat_table ps\n     join travelclass_table t\n   on ps.travelclassref = ref(t)\n    group by t.class_name;
db1e877d-1527-4395-b006-01c593cd327e:1737497063502:19:S:create or replace view v_plane_seatcount as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.seat_list )\n          ) as seat_count\n     from plane_table p;
da6978b5-0b41-48c7-86c0-0db92fcaefe6:1737497065052:12:S:create or replace view v_plane_requiredroles as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.required_role_list )\n          ) as required_roles_count\n     from plane_table p;
6ec1ebf7-72eb-43af-9d78-ee3106d0b1cc:1737497067097:12:S:create or replace view v_crewmember_rolecount as\n   select c.id as crew_member_id,\n          c.first_name\n          || ' '\n          || c.last_name as full_name,\n          (\n             select count(*)\n               from table ( c.roles_list )\n          ) as role_count\n     from crewmember_table c;
5f91be2b-d907-4184-a135-2658775c7817:1737497068818:11:S:create or replace view v_airport_techsupport as\n   select a.iata as airport_iata,\n          a.name as airport_name,\n          (\n             select count(*)\n               from table ( a.technical_support_list )\n          ) as tech_support_count\n     from airport_table a;
29a15426-5182-41f5-8957-f7b174bb9677:1737497072444:16:S:create or replace view v_flights_seatings as\n   select f.id as flight_id,\n          p.id as plane_id,\n          ( deref(s.column_value) ).seatrow as seat_row,\n          ( deref(s.column_value) ).seatcolumn as seat_column,\n          ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n          ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n          ( deref(s.column_value) ).price as price\n     from flight_table f\n     join plane_table p\n   on f.plane_id = p.id\n    cross join table ( cast(p.seat_list as planeseatlist) ) s;
cf4c1011-b002-4c1d-8e94-80bd89bebdf5:1737497072779:23:S:-------------------------------------------------------------------------------\nselect *\n  from v_travelclass_stats;
80b1eabb-5649-49cc-877d-cae410f24af3:1737497072895:21:S:select *\n  from v_plane_seatcount;
74368bae-8574-4978-8249-9265d6dda173:1737497073014:14:S:select *\n  from v_plane_requiredroles;
1d5bf46a-5e36-4486-91dd-93ed3513e389:1737497073120:19:S:select *\n  from v_crewmember_rolecount;
3c7b6f48-7a79-4889-8baf-c8dbd5a0d8c7:1737497073344:34:S:select *\n  from v_airport_techsupport;
afce5aad-a70a-4d89-9d3c-aee491a56fd2:1737497073549:28:S:select *\n  from v_flights_seatings;
8ad67076-12cd-4a70-a2ff-2d8449409256:1737497369182:862:S:BEGIN\n  -- First, drop all parent tables\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name NOT LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Next, drop remaining tables (nested tables)\n  FOR cur_rec IN (\n    SELECT table_name AS object_name, 'TABLE' AS object_type \n    FROM user_tables\n    WHERE table_name LIKE '%LIST_TABLE'\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '"';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TABLE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\n\n  -- Finally, drop all types\n  FOR cur_rec IN (\n    SELECT type_name AS object_name, 'TYPE' AS object_type \n    FROM user_types\n  ) LOOP\n    BEGIN\n      EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP TYPE "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
cdd27fed-1151-416d-85cc-f443cc536a07:1737497376326:1343:S:BEGIN\n  FOR cur_rec IN (\n    SELECT object_name, object_type \n    FROM user_objects\n    WHERE object_type IN (\n      'TABLE','VIEW','PACKAGE','PROCEDURE','FUNCTION','SEQUENCE','TRIGGER','TYPE'\n    )\n  ) LOOP\n    BEGIN\n      IF cur_rec.object_type = 'TABLE' THEN\n        EXECUTE IMMEDIATE 'DROP TABLE "' || cur_rec.object_name || '" CASCADE CONSTRAINTS';\n      ELSIF cur_rec.object_type = 'TYPE' THEN\n        EXECUTE IMMEDIATE 'DROP TYPE "' || cur_rec.object_name || '" FORCE';\n      ELSE\n        EXECUTE IMMEDIATE 'DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"';\n      END IF;\n    EXCEPTION\n      WHEN OTHERS THEN\n        DBMS_OUTPUT.put_line('FAILED: DROP ' || cur_rec.object_type || ' "' || cur_rec.object_name || '"');\n    END;\n  END LOOP;\nEND;\n/
bf957456-d9ce-4537-a25b-a949e3ba88dd:1737497380289:63:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TravelClass AS OBJECT (\n    Id            INT,\n    Class_Name    VARCHAR2(100),\n    Description   VARCHAR2(255)\n);\n/
f4b16ae6-6e78-49a3-bca5-83f1bdccc25d:1737497380735:56:S:CREATE TABLE TravelClass_Table OF TravelClass;
cf366121-5640-4ab1-a935-667b3244d15e:1737497380946:0:F:/
df25f298-ce6d-48a6-92e3-bab70b94acc0:1737497381924:72:S:ALTER TABLE TravelClass_Table \n  ADD CONSTRAINT PK_TravelClass \n  PRIMARY KEY (Id);
d004bcfa-4783-4c68-8661-67ecad85461e:1737497382166:0:F:/
318f3b98-8dd5-4a15-b814-3947a6576635:1737497383212:24:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Role AS OBJECT (\n    Id         INT,\n    Role_name  VARCHAR2(100)\n);\n/
31cddb63-55dc-4444-92b4-fb1943cef9d1:1737497383472:23:S:CREATE TABLE Role_Table OF Role;
b5665c90-ee16-4bca-82ba-fd579733cc82:1737497383583:0:F:/
362054c7-7fce-4335-90a2-fbe93de63715:1737497383855:30:S:ALTER TABLE Role_Table \n  ADD CONSTRAINT PK_Role \n  PRIMARY KEY (Id);
98eb0ca9-8a03-42bc-aac5-79b4c4b66fe3:1737497383968:0:F:/
b15c335b-542c-4f0c-894d-fde3239e0f2e:1737497386052:26:S:CREATE OR REPLACE TYPE PlaneSeat AS OBJECT (\n    Id              INT,\n    SeatRow         INT,\n    SeatColumn      INT,\n    TravelClassRef  REF TravelClass,\n    Price           FLOAT\n);\n/
7cc7f450-bcbd-41d5-8e47-d7e1f924ae3e:1737497386271:70:S:CREATE TABLE PlaneSeat_Table OF PlaneSeat;
8ae1bc11-92d8-4da7-b97b-9a543129a38c:1737497386519:0:F:/
afb45040-e6cf-4c54-8a3d-582ea3bdc17f:1737497386768:29:S:ALTER TABLE PlaneSeat_Table \n  ADD CONSTRAINT PK_PlaneSeat \n  PRIMARY KEY (Id);
ceaecb4b-7307-4ec8-a8b8-f9c293ed90e7:1737497386872:0:F:/
1ee8c66f-f3ae-4b94-9f96-1b7c768d6986:1737497387172:18:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE PlaneSeatList AS TABLE OF REF PlaneSeat;\n/
8f3302fd-1d27-4dea-b9fb-04a40c7e69b3:1737497387479:15:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleList AS TABLE OF REF Role;\n/
cc1a4a8d-d59e-4989-aa68-bdb3286080e9:1737497388125:18:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE RoleToCrew AS OBJECT (\n    Crew_member_id  INT,\n    Role_id         INT\n);\n/
7ea4e693-e27b-4991-9c05-44a68569e7eb:1737497388318:24:S:CREATE TABLE RoleToCrew_Table OF RoleToCrew;
a652c807-55a8-41fe-8b62-959e5411e6c2:1737497388417:0:F:/
d47e7421-3a6d-43e0-835b-dff119d232ba:1737497388702:28:S:ALTER TABLE RoleToCrew_Table \n  ADD CONSTRAINT PK_RoleToCrew \n  PRIMARY KEY (Crew_member_id, Role_id);
46362639-9380-4fbf-9fe5-241baa92db00:1737497388807:0:F:/
55be40e8-fdfc-43a8-8eee-89c2a15198a4:1737497390080:31:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Plane AS OBJECT (\n    Id                   INT,\n    Seat_list            PlaneSeatList,\n    Required_role_list   RoleList\n);\n/
132e86cd-914a-427f-89ce-cf9cbd480b88:1737497390756:51:S:CREATE TABLE Plane_Table OF Plane\n    NESTED TABLE Seat_list STORE AS Plane_Seat_List_Table,\n    NESTED TABLE Required_role_list STORE AS Plane_Role_List_Table;
3fd79393-976c-427f-962c-89a9ffcd06b3:1737497390880:0:F:/
e7906e66-af7e-4697-a716-f688dc72e16b:1737497391339:49:S:ALTER TABLE Plane_Table \n  ADD CONSTRAINT PK_Plane \n  PRIMARY KEY (Id);
98530b45-6e2a-4446-bab9-2ded50a064d0:1737497391470:0:F:/
78ae72ba-8a7c-44b8-9686-3f76b59f098b:1737497393399:22:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMember AS OBJECT (\n    Id                   INT,\n    First_name           VARCHAR2(100),\n    Last_name            VARCHAR2(100),\n    Date_of_birth        DATE,\n    Email                VARCHAR2(150),\n    Phone                VARCHAR2(15),\n    Passport_number      VARCHAR2(20),\n    Roles_list           RoleList,\n    Number_of_hours_in_air FLOAT\n);\n/
fa937613-79a1-4e6b-8e69-e3311b5518ba:1737497393673:45:S:CREATE TABLE CrewMember_Table OF CrewMember\n    NESTED TABLE Roles_list STORE AS Crew_Role_List_Table;
d8ce453a-e251-4dbd-bb28-13fc1b2941dd:1737497393796:0:F:/
4fb0af43-1227-4298-9032-413f42cf6af0:1737497394034:29:S:ALTER TABLE CrewMember_Table \n  ADD CONSTRAINT PK_CrewMember \n  PRIMARY KEY (Id);
e5bf60b0-5deb-48c1-a72e-491da471652e:1737497394143:0:F:/
6b888749-de63-43b4-9fd5-ce4b58648244:1737497394990:21:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE CrewMemberAvailability AS OBJECT (\n    Id             INT,\n    Crew_member_id INT,\n    Flight_id      INT,\n    End_of_break   TIMESTAMP\n);\n/
3e52962b-879a-4e00-8934-7fd4bbcb87c8:1737497395182:26:S:CREATE TABLE CrewMemberAvailability_Table OF CrewMemberAvailability;
1b8af451-e71f-4eae-8a94-d5e0eb28a28f:1737497395285:0:F:/
8775eeb6-5454-47b9-8410-5383354a8f7e:1737497395527:24:S:ALTER TABLE CrewMemberAvailability_Table \n  ADD CONSTRAINT PK_CrewMemberAvailability \n  PRIMARY KEY (Id);
141f40ee-9753-4b28-9b11-f89dc6693cfd:1737497395632:0:F:/
1ba23b25-3564-4675-98cd-1f568dea7871:1737497396826:28:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Reservation AS OBJECT (\n    Id              INT,\n    Flight_id       INT,\n    Passenger_id    INT,\n    Requested_Class REF TravelClass,\n    Seat            REF PlaneSeat\n);\n/
2b8f0c65-5906-4b7c-a436-9bcdc09cc9a2:1737497397034:24:S:CREATE TABLE Reservation_Table OF Reservation;
f67226bb-2a0d-4be3-8891-929086aa5d9c:1737497397132:0:F:/
3601f981-2e72-4569-96d2-1ba64e9c7299:1737497397388:25:S:ALTER TABLE Reservation_Table \n  ADD CONSTRAINT PK_Reservation \n  PRIMARY KEY (Id);
12c7611f-faf9-40ca-9864-fba3efe194c3:1737497397490:0:F:/
6a03fb30-7256-4204-9280-029b30a34cf4:1737497399113:26:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Flight AS OBJECT (\n    Id                       INT,\n    Plane_id                 INT,\n    Departure_datetime       TIMESTAMP,\n    Arrival_datetime         TIMESTAMP,\n    IATA_from                CHAR(3),\n    IATA_to                  CHAR(3),\n    Reservation_closing_datetime TIMESTAMP,\n    List_taken_seats         PlaneSeatList,\n    Role_to_crew_list        RoleList\n);\n/
d460b725-837f-458e-b39f-b42d3e4a9a0f:1737497399446:57:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
d460b725-837f-458e-b39f-b42d3e4a9a0f:1737497399446:57:S:CREATE TABLE Flight_Table OF Flight\n    NESTED TABLE List_taken_seats STORE AS Flight_Taken_Seats_Table,\n    NESTED TABLE Role_to_crew_list STORE AS Flight_Role_Crew_Table;
748cb77d-de2f-40a1-b154-26837b19b73d:1737497399796:24:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
748cb77d-de2f-40a1-b154-26837b19b73d:1737497399796:24:S:ALTER TABLE Flight_Table \n  ADD CONSTRAINT PK_Flight \n  PRIMARY KEY (Id);
dd0820a9-8c12-419c-ac11-9ad83985c1e7:1737497401221:20:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Passenger AS OBJECT (\n    Id              INT,\n    First_name      VARCHAR2(100),\n    Last_name       VARCHAR2(100),\n    Date_of_birth   DATE,\n    Email           VARCHAR2(150),\n    Phone           VARCHAR2(15),\n    Passport_number VARCHAR2(20),\n    Carer_id        INT\n);\n/
7e941aec-af72-4711-a98c-96e3d882a36f:1737497401399:19:S:CREATE TABLE Passenger_Table OF Passenger;
7e941aec-af72-4711-a98c-96e3d882a36f:1737497401399:19:S:CREATE TABLE Passenger_Table OF Passenger;
6adc1214-a886-48c6-b630-3048936a7e6e:1737497401716:25:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
6adc1214-a886-48c6-b630-3048936a7e6e:1737497401716:25:S:ALTER TABLE Passenger_Table \n  ADD CONSTRAINT PK_Passenger \n  PRIMARY KEY (Id);
0f951c7a-8092-491c-8e1b-9e6323f49299:1737497402994:19:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupport AS OBJECT (\n    Id             INT,\n    Name           VARCHAR2(100),\n    Specialization VARCHAR2(100),\n    Shift_start    TIMESTAMP,\n    Shift_end      TIMESTAMP,\n    Airport_IATA   CHAR(3)\n);\n/
1ae3622c-cfa6-4925-9567-a289846e8198:1737497403176:21:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
1ae3622c-cfa6-4925-9567-a289846e8198:1737497403176:21:S:CREATE TABLE TechnicalSupport_Table OF TechnicalSupport;
243bde9a-9758-4618-9710-ac801ca6b0d8:1737497403507:24:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
243bde9a-9758-4618-9710-ac801ca6b0d8:1737497403507:24:S:ALTER TABLE TechnicalSupport_Table \n  ADD CONSTRAINT PK_TechnicalSupport \n  PRIMARY KEY (Id);
71103656-01ee-4c1f-85ae-130e98e25dbf:1737497403901:19:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE TechnicalSupportList AS TABLE OF REF TechnicalSupport;\n/
fb0780d5-4c8e-443a-b6d4-df48e098b6f8:1737497405064:24:S:--------------------------------------------------------------------------------\nCREATE OR REPLACE TYPE Airport AS OBJECT (\n    IATA                    CHAR(3),\n    Name                    VARCHAR2(150),\n    Location                VARCHAR2(255),\n    Technical_Support_List  TechnicalSupportList\n);\n/
5a987709-3faa-409b-9527-390a0a729c8b:1737497405319:39:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
5a987709-3faa-409b-9527-390a0a729c8b:1737497405319:39:S:CREATE TABLE Airport_Table OF Airport\n    NESTED TABLE Technical_Support_List STORE AS Airport_Technical_Support_Table;
13952d91-609c-489d-b079-75048d20e6d9:1737497405641:25:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
13952d91-609c-489d-b079-75048d20e6d9:1737497405641:25:S:ALTER TABLE Airport_Table \n  ADD CONSTRAINT PK_Airport \n  PRIMARY KEY (IATA);
7ec46957-48b1-40a0-b676-fd84c691da72:1737497420704:61:S:-------------------------------------------------------------------------------\ninsert into travelclass_table values ( travelclass(\n   1,\n   'Economy',\n   'Najtasza klasa, podstawowe udogodnienia'\n) );
2ede0c7b-b315-4564-98a6-db1126ba63b6:1737497421752:26:S:insert into travelclass_table values ( travelclass(\n   2,\n   'Premium',\n   'Lepsze siedzenia, dodatkowe usugi'\n) );
bb1a98c0-c837-4732-8f1a-a93b394f2a21:1737497422525:13:S:insert into travelclass_table values ( travelclass(\n   3,\n   'Business',\n   'Wysoki komfort, szerokie fotele, priorytet'\n) );
9e519596-9a98-45ad-b04c-2e238211a275:1737497422999:41:S:insert into role_table values ( role(\n   1,\n   'Pilot'\n) );
2346d245-563b-428b-9ff0-3038e1e36b31:1737497423326:17:S:insert into role_table values ( role(\n   2,\n   'CoPilot'\n) );
442afb50-305b-42cf-a214-4ddd43fcd198:1737497423630:7:S:insert into role_table values ( role(\n   3,\n   'Steward'\n) );
c1b642c3-918a-4aac-b109-43c0aaf6e901:1737497424355:31:S:-------------------------------------------------------------------------------\ninsert into airport_table values ( airport(\n   'WAW',\n   'Warsaw Chopin Airport',\n   'Warszawa, Polska',\n   technicalsupportlist()\n) );
352b295a-333c-4fc2-b555-31a19cdedeef:1737497424845:7:S:insert into airport_table values ( airport(\n   'KRK',\n   'Krakow Airport',\n   'Krakw, Polska',\n   technicalsupportlist()\n) );
f883bbcf-8127-45c0-87d5-2d2f2551dd71:1737497425404:19:S:insert into technicalsupport_table values ( technicalsupport(\n   1,\n   'Jan Kowalski',\n   'Elektronika',\n   timestamp '2025-01-20 06:00:00',\n   timestamp '2025-01-20 14:00:00',\n   'WAW'\n) );
26e04898-da2d-42ce-8d57-040880d69eb1:1737497425879:8:S:insert into technicalsupport_table values ( technicalsupport(\n   2,\n   'Anna Nowak',\n   'Silniki',\n   timestamp '2025-01-20 14:00:00',\n   timestamp '2025-01-20 22:00:00',\n   'WAW'\n) );
ac805665-0de7-4bf6-a22d-af4a761397b1:1737497442049:105:S:-------------------------------------------------------------------------------\ndeclare\n   v_economy  ref travelclass;\n   v_premium  ref travelclass;\n   v_business ref travelclass;\nbegin\n   select ref(t)\n     into v_economy\n     from travelclass_table t\n    where t.id = 1;\n   select ref(t)\n     into v_premium\n     from travelclass_table t\n    where t.id = 2;\n   select ref(t)\n     into v_business\n     from travelclass_table t\n    where t.id = 3;\n\n   -- Seats for Plane 1 (Small)\n   insert into planeseat_table values ( planeseat(\n      1,\n      1,\n      1,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      2,\n      1,\n      2,\n      v_economy,\n      100.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      3,\n      2,\n      1,\n      v_premium,\n      150.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      4,\n      2,\n      2,\n      v_business,\n      200.0\n   ) );\n\n   -- Seats for Plane 2 (Large)\n   insert into planeseat_table values ( planeseat(\n      5,\n      1,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      6,\n      1,\n      2,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      7,\n      2,\n      1,\n      v_economy,\n      200.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      8,\n      2,\n      2,\n      v_premium,\n      280.0\n   ) );\n   insert into planeseat_table values ( planeseat(\n      9,\n      3,\n      1,\n      v_business,\n      350.0\n   ) );\nend;\n/
ab3933e9-933d-4e13-9c8f-313b14e83798:1737497444397:33:S:-------------------------------------------------------------------------------\ninsert into crewmember_table values ( crewmember(\n   1,\n   'Adam',\n   'Pilot',\n   date '1985-06-10',\n   'adam.pilot@airline.com',\n   '123456789',\n   'AB1234567',\n   rolelist(),\n   3000.0\n) );
16c961c1-9395-48d5-9b49-2c0217fdccda:1737497445318:13:S:insert into crewmember_table values ( crewmember(\n   2,\n   'Ewa',\n   'CoPilot',\n   date '1990-03-15',\n   'ewa.copilot@airline.com',\n   '987654321',\n   'CD7654321',\n   rolelist(),\n   1500.0\n) );
d6f3c74a-08a3-4876-8801-ba828cfee7de:1737497447592:93:S:-------------------------------------------------------------------------------\ndeclare\n   v_pilot   ref role;\n   v_copilot ref role;\nbegin\n   select ref(r)\n     into v_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_pilot)\n    where c.id = 1;\n   update crewmember_table c\n      set\n      c.roles_list = rolelist(v_copilot)\n    where c.id = 2;\nend;\n/
89a3a976-b7fb-476d-aa45-f1efbad30f6d:1737497454385:74:S:-------------------------------------------------------------------------------\ndeclare\n   v_seats_small  planeseatlist := planeseatlist();\n   v_seats_big    planeseatlist := planeseatlist();\n   v_role_pilot   ref role;\n   v_role_copilot ref role;\nbegin\n   select ref(r)\n     into v_role_pilot\n     from role_table r\n    where r.role_name = 'Pilot';\n   select ref(r)\n     into v_role_copilot\n     from role_table r\n    where r.role_name = 'CoPilot';\n\n   -- Plane 1 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.id between 1 and 4\n   ) loop\n      v_seats_small.extend(1);\n      v_seats_small(v_seats_small.count) := seat_ref.r;\n   end loop;\n\n   -- Plane 2 Seats\n   for seat_ref in (\n      select ref(ps) as r\n        from planeseat_table ps\n       where ps.id between 5 and 9\n   ) loop\n      v_seats_big.extend(1);\n      v_seats_big(v_seats_big.count) := seat_ref.r;\n   end loop;\n\n   -- Insert Planes\n   insert into plane_table values ( plane(\n      1,\n      v_seats_small,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\n   insert into plane_table values ( plane(\n      2,\n      v_seats_big,\n      rolelist(\n         v_role_pilot,\n         v_role_copilot\n      )\n   ) );\nend;\n/
c451f2d0-54fa-4173-bd37-7ad58ad71cfa:1737497455129:18:S:-------------------------------------------------------------------------------\ninsert into passenger_table values ( passenger(\n   1,\n   'Piotr',\n   'Nowak',\n   date '2000-01-01',\n   'piotr.nowak@mail.com',\n   '123456789',\n   'PAS123',\n   null\n) );
835c61d2-83c5-499b-b981-d6a4c4ac3555:1737497455648:6:S:insert into passenger_table values ( passenger(\n   2,\n   'Anna',\n   'Kowalska',\n   date '1995-12-25',\n   'anna.kowalska@mail.com',\n   '987654321',\n   'PAS456',\n   null\n) );
b4235dee-788a-463c-b561-ba32f0ef3b94:1737497455827:3:S:commit;
e47eb45b-b64f-4d8f-80b7-a77fb9da1441:1737497458480:32:S:-------------------------------------------------------------------------------\ndeclare\n   v_seats_taken planeseatlist := planeseatlist();\nbegin\n   insert into flight_table values ( flight(\n      1,\n      1,\n      timestamp '2025-02-01 09:00:00',\n      timestamp '2025-02-01 11:00:00',\n      'WAW',\n      'KRK',\n      timestamp '2025-01-31 23:59:00',\n      v_seats_taken,\n      rolelist()\n   ) );\n\n   insert into flight_table values ( flight(\n      2,\n      2,\n      timestamp '2025-02-02 14:00:00',\n      timestamp '2025-02-02 17:00:00',\n      'KRK',\n      'WAW',\n      timestamp '2025-02-01 23:59:00',\n      v_seats_taken,\n      rolelist()\n   ) );\n\n   commit;\nend;\n/
78b4e318-fbb9-4f6e-b79c-aa3ef709fa2b:1737497931232:50:S:select username,\n       osuser,\n       machine,\n       schemaname\n  from gv$session\n where sid = (\n   select sys_context(\n      'userenv',\n      'sid'\n   )\n     from dual\n);
217555c1-9ccd-4909-8846-e22137129b61:1737497937047:18:S:-------------------------------------------------------------------------------\ncreate or replace view v_travelclass_stats as\n   select t.class_name as class_name,\n          count(*) as seat_count,\n          min(ps.price) as min_price,\n          max(ps.price) as max_price,\n          round(\n             avg(ps.price),\n             2\n          ) as avg_price\n     from planeseat_table ps\n     join travelclass_table t\n   on ps.travelclassref = ref(t)\n    group by t.class_name;
c81d0c49-1a15-40bb-8e43-d3a8821573a4:1737497939101:14:S:create or replace view v_plane_seatcount as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.seat_list )\n          ) as seat_count\n     from plane_table p;
1519c4f6-27b4-4165-9766-0b7c624d07f4:1737497940603:13:S:create or replace view v_plane_requiredroles as\n   select p.id as plane_id,\n          (\n             select count(*)\n               from table ( p.required_role_list )\n          ) as required_roles_count\n     from plane_table p;
a0bda2e1-deb3-4b93-8d28-bb87571af02f:1737497942964:12:S:create or replace view v_crewmember_rolecount as\n   select c.id as crew_member_id,\n          c.first_name\n          || ' '\n          || c.last_name as full_name,\n          (\n             select count(*)\n               from table ( c.roles_list )\n          ) as role_count\n     from crewmember_table c;
69c014f8-dbd9-40e3-833d-70738fdddf7c:1737497944762:13:S:create or replace view v_airport_techsupport as\n   select a.iata as airport_iata,\n          a.name as airport_name,\n          (\n             select count(*)\n               from table ( a.technical_support_list )\n          ) as tech_support_count\n     from airport_table a;
0b89c8af-3d17-4f09-9680-92f9dae5156f:1737497952203:32:S:create or replace view v_flights_seatings as\n   select f.id as flight_id,\n          p.id as plane_id,\n          ( deref(s.column_value) ).seatrow as seat_row,\n          ( deref(s.column_value) ).seatcolumn as seat_column,\n          ( deref((deref(s.column_value)).travelclassref) ).id as travel_class_id,\n          ( deref((deref(s.column_value)).travelclassref) ).class_name as travel_class_name,\n          ( deref(s.column_value) ).price as price\n     from flight_table f\n     join plane_table p\n   on f.plane_id = p.id\n    cross join table ( cast(p.seat_list as planeseatlist) ) s;
31072742-3274-44be-ac52-f9931eff8b0e:1737497953026:44:S:-------------------------------------------------------------------------------\nselect *\n  from v_travelclass_stats;
7ab2d28e-eac9-493c-940f-de1ba59be1e4:1737497953263:36:S:select *\n  from v_plane_seatcount;
161ba12e-dd0a-49ee-b3ae-7e3214a59267:1737497953503:36:S:select *\n  from v_plane_requiredroles;
bf5e8eae-c86a-4414-9d7d-a28b1f9de2c9:1737497953710:32:S:select *\n  from v_crewmember_rolecount;
9a10ad0a-f4bb-46f9-943b-2241adff4fee:1737497953925:34:S:select *\n  from v_airport_techsupport;
ac15a4e0-f816-4ed3-ac3f-8fd991ef046e:1737497954485:59:S:select *\n  from v_flights_seatings;
23cfcf87-9b0f-4103-93d5-921501ba5a10:1737497968844:0:S:SET SERVEROUTPUT ON;
112443ed-a555-41aa-af56-4d72fb2a7340:1737497972866:46:S:create or replace package flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   );\n   procedure take_seat_at_plane (\n      reservation_list in sys.odcinumberlist, -- List of Reservation IDs\n      seat_list        in sys.odcinumberlist         -- List of Seat IDs\n   );\nend flight_management;\n/
e32ecff2-d5b2-4843-adf2-d93ba8f0bffb:1737498011307:269:S:create or replace package body flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   ) is\n      plane_obj    plane; -- Variable to hold the Plane object\n      seat_refs    planeseatlist; -- Nested table of REF PlaneSeat\n      seat_ref     ref planeseat; -- REF variable for PlaneSeat\n      seat         planeseat; -- Variable to hold the dereferenced PlaneSeat\n      current_row  int := -1; -- Keeps track of the current row\n      seat_display varchar2(500); -- To build the seat display for a row\n   begin\n        -- Retrieve the Plane object by ID\n      select value(p)\n        into plane_obj\n        from plane_table p\n       where p.id = plane_id;\n\n        -- Assign the nested table of seat references\n      seat_refs := plane_obj.seat_list;\n\n        -- Loop through the nested table\n      if seat_refs is not null then\n         for i in 1..seat_refs.count loop\n            seat_ref := seat_refs(i);\n\n                -- Dereference the seat\n            select deref(seat_ref)\n              into seat\n              from dual;\n\n                -- Check if we are on a new row\n            if seat.seatrow != current_row then\n                    -- Print the previous row (if exists) and reset for the new row\n               if current_row != -1 then\n                  dbms_output.put_line(seat_display);\n               end if;\n\n                    -- Start a new row\n               current_row := seat.seatrow;\n               seat_display := '';\n            end if;\n\n                -- Append the seat (e.g., 1A) to the current row display\n            seat_display := seat_display\n                            || seat.seatrow\n                            || chr(64 + seat.seatcolumn)\n                            || ' ';\n         end loop;\n\n            -- Print the final row\n         if current_row != -1 then\n            dbms_output.put_line(seat_display);\n         end if;\n      else\n         dbms_output.put_line('No seats found for Plane ID ' || plane_id);\n      end if;\n   exception\n      when no_data_found then\n         dbms_output.put_line('No plane found with ID ' || plane_id);\n      when others then\n         dbms_output.put_line('An error occurred: ' || sqlerrm);\n   end show_plane_seats_distribution;\n\n   procedure take_seat_at_plane (\n      reservation_list in sys.odcinumberlist,\n      seat_list        in sys.odcinumberlist\n   ) is\n      reservation_obj reservation; -- Variable to hold the reservation\n      current_seat    ref planeseat; -- Current seat reference of the reservation\n      new_seat        ref planeseat; -- New seat reference to be assigned\n   begin\n        -- Iterate over reservations and seats\n      for i in 1..reservation_list.count loop\n            -- Fetch the reservation object\n         select value(r)\n           into reservation_obj\n           from reservation_table r\n          where r.id = reservation_list(i);\n\n            -- Check if the reservation already has a seat\n         if reservation_obj.seat is not null then\n                -- Release the current seat\n            reservation_obj.seat := null;\n\n                -- Update the reservation table\n            update reservation_table r\n               set\n               r.seat = null\n             where r.id = reservation_list(i);\n         end if;\n\n            -- Assign the new seat\n         select ref(s)\n           into new_seat\n           from planeseat_table s\n          where s.seatrow = seat_list(i); -- Assuming seat_list contains row identifiers\n\n         reservation_obj.seat := new_seat;\n\n            -- Update the reservation table with the new seat\n         update reservation_table r\n            set\n            r.seat = new_seat\n          where r.id = reservation_list(i);\n      end loop;\n   exception\n      when no_data_found then\n         dbms_output.put_line('Reservation or seat not found.');\n      when others then\n         dbms_output.put_line('An error occurred: ' || sqlerrm);\n   end take_seat_at_plane;\nend flight_management;\n/
2ab382d1-5f16-40f8-abe1-6e59b639768f:1737498021126:150:S:begin\n   flight_management.show_plane_seats_distribution(plane_id => 2);\nend;\n/
e9fdf29b-26c5-434e-baa1-501761a50763:1737498036866:30:S:begin\n   flight_management.show_plane_seats_distribution(plane_id => 1);\nend;\n/
cc826363-c120-444e-a506-6070ef9794b9:1737501484847:540:S:select *\nfrom RESERVATION_TABLE;
a1b4210d-a78f-43f9-9af8-10e391e0f1f2:1737501681558:193:S:-------------------------------------------------------------------------------\ninsert into reservation_table values ( reservation(\n   1,\n   1,\n   1,\n   (select ref(t) from travelclass_table t where t.id = 1),\n   null\n) );
ae65c3de-0603-4dcd-9725-bfc2e07993e2:1737501682746:22:S:insert into reservation_table values ( reservation(\n   2,\n   1,\n   2,\n   (select ref(t) from travelclass_table t where t.id = 2),\n   null\n) );
e1c8aa74-1c1d-411a-83ed-052a069c529c:1737501683446:16:S:insert into reservation_table values ( reservation(\n   3,\n   2,\n   1,\n   (select ref(t) from travelclass_table t where t.id = 1),\n   null\n) );
7908e510-e13b-4bf5-ad4a-9e8c1883616a:1737501684037:9:S:insert into reservation_table values ( reservation(\n   4,\n   2,\n   2,\n   (select ref(t) from travelclass_table t where t.id = 3),\n   null\n) );
c8e9f5fe-c6f1-4485-9771-cb35e12c72c5:1737501927307:0:S:SET SERVEROUTPUT ON;
5307b49c-6244-46b3-a40e-65a23008b184:1737501933508:165:S:create or replace package flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   );\n   procedure take_seat_at_flight (\n      reservation_list in sys.odcinumberlist, -- List of Reservation IDs\n      seat_list        in sys.odcinumberlist         -- List of Seat IDs\n   );\nend flight_management;\n/
5307b49c-6244-46b3-a40e-65a23008b184:1737501933508:165:S:create or replace package flight_management as\n   procedure show_plane_seats_distribution (\n      plane_id number\n   );\n   procedure take_seat_at_flight (\n      reservation_list in sys.odcinumberlist, -- List of Reservation IDs\n      seat_list        in sys.odcinumberlist         -- List of Seat IDs\n   );\nend flight_management;\n/
817da9ea-a14e-490a-8164-c2fdacdc6ed8:1737502047730:0:S:SET SERVEROUTPUT ON;
817da9ea-a14e-490a-8164-c2fdacdc6ed8:1737502047730:0:S:SET SERVEROUTPUT ON;
817da9ea-a14e-490a-8164-c2fdacdc6ed8:1737502047730:0:S:SET SERVEROUTPUT ON;
817da9ea-a14e-490a-8164-c2fdacdc6ed8:1737502047730:0:S:SET SERVEROUTPUT ON;
817da9ea-a14e-490a-8164-c2fdacdc6ed8:1737502047730:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
121e5364-72ae-4f17-9b27-13f8a33bac01:1737502338721:0:S:SET SERVEROUTPUT ON;
